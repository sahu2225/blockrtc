/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/_error";
exports.ids = ["pages/_error"];
exports.modules = {

/***/ "./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2F_error&preferredRegion=&absolutePagePath=private-next-pages%2F_error&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2F_error&preferredRegion=&absolutePagePath=private-next-pages%2F_error&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getServerSideProps: () => (/* binding */ getServerSideProps),\n/* harmony export */   getStaticPaths: () => (/* binding */ getStaticPaths),\n/* harmony export */   getStaticProps: () => (/* binding */ getStaticProps),\n/* harmony export */   reportWebVitals: () => (/* binding */ reportWebVitals),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   unstable_getServerProps: () => (/* binding */ unstable_getServerProps),\n/* harmony export */   unstable_getServerSideProps: () => (/* binding */ unstable_getServerSideProps),\n/* harmony export */   unstable_getStaticParams: () => (/* binding */ unstable_getStaticParams),\n/* harmony export */   unstable_getStaticPaths: () => (/* binding */ unstable_getStaticPaths),\n/* harmony export */   unstable_getStaticProps: () => (/* binding */ unstable_getStaticProps)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages/module.compiled */ \"./node_modules/next/dist/server/future/route-modules/pages/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var private_next_pages_document__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! private-next-pages/_document */ \"./node_modules/next/dist/pages/_document.js\");\n/* harmony import */ var private_next_pages_document__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(private_next_pages_document__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var private_next_pages_app__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! private-next-pages/_app */ \"./pages/_app.tsx\");\n/* harmony import */ var private_next_pages_error__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! private-next-pages/_error */ \"./node_modules/next/dist/pages/_error.js\");\n/* harmony import */ var private_next_pages_error__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(private_next_pages_error__WEBPACK_IMPORTED_MODULE_5__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([private_next_pages_app__WEBPACK_IMPORTED_MODULE_4__]);\nprivate_next_pages_app__WEBPACK_IMPORTED_MODULE_4__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the app and document modules.\n\n\n// Import the userland code.\n\n// Re-export the component (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(private_next_pages_error__WEBPACK_IMPORTED_MODULE_5__, \"default\"));\n// Re-export methods.\nconst getStaticProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(private_next_pages_error__WEBPACK_IMPORTED_MODULE_5__, \"getStaticProps\");\nconst getStaticPaths = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(private_next_pages_error__WEBPACK_IMPORTED_MODULE_5__, \"getStaticPaths\");\nconst getServerSideProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(private_next_pages_error__WEBPACK_IMPORTED_MODULE_5__, \"getServerSideProps\");\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(private_next_pages_error__WEBPACK_IMPORTED_MODULE_5__, \"config\");\nconst reportWebVitals = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(private_next_pages_error__WEBPACK_IMPORTED_MODULE_5__, \"reportWebVitals\");\n// Re-export legacy methods.\nconst unstable_getStaticProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(private_next_pages_error__WEBPACK_IMPORTED_MODULE_5__, \"unstable_getStaticProps\");\nconst unstable_getStaticPaths = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(private_next_pages_error__WEBPACK_IMPORTED_MODULE_5__, \"unstable_getStaticPaths\");\nconst unstable_getStaticParams = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(private_next_pages_error__WEBPACK_IMPORTED_MODULE_5__, \"unstable_getStaticParams\");\nconst unstable_getServerProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(private_next_pages_error__WEBPACK_IMPORTED_MODULE_5__, \"unstable_getServerProps\");\nconst unstable_getServerSideProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(private_next_pages_error__WEBPACK_IMPORTED_MODULE_5__, \"unstable_getServerSideProps\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES,\n        page: \"/_error\",\n        pathname: \"/_error\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    components: {\n        App: private_next_pages_app__WEBPACK_IMPORTED_MODULE_4__[\"default\"],\n        Document: (private_next_pages_document__WEBPACK_IMPORTED_MODULE_3___default())\n    },\n    userland: private_next_pages_error__WEBPACK_IMPORTED_MODULE_5__\n});\n\n//# sourceMappingURL=pages.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTJnBhZ2U9JTJGX2Vycm9yJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD1wcml2YXRlLW5leHQtcGFnZXMlMkZfZXJyb3ImYWJzb2x1dGVBcHBQYXRoPXByaXZhdGUtbmV4dC1wYWdlcyUyRl9hcHAmYWJzb2x1dGVEb2N1bWVudFBhdGg9cHJpdmF0ZS1uZXh0LXBhZ2VzJTJGX2RvY3VtZW50Jm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDaEM7QUFDTDtBQUMxRDtBQUNvRDtBQUNWO0FBQzFDO0FBQ3NEO0FBQ3REO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyxxREFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyx1QkFBdUIsd0VBQUssQ0FBQyxxREFBUTtBQUNyQyx1QkFBdUIsd0VBQUssQ0FBQyxxREFBUTtBQUNyQywyQkFBMkIsd0VBQUssQ0FBQyxxREFBUTtBQUN6QyxlQUFlLHdFQUFLLENBQUMscURBQVE7QUFDN0Isd0JBQXdCLHdFQUFLLENBQUMscURBQVE7QUFDN0M7QUFDTyxnQ0FBZ0Msd0VBQUssQ0FBQyxxREFBUTtBQUM5QyxnQ0FBZ0Msd0VBQUssQ0FBQyxxREFBUTtBQUM5QyxpQ0FBaUMsd0VBQUssQ0FBQyxxREFBUTtBQUMvQyxnQ0FBZ0Msd0VBQUssQ0FBQyxxREFBUTtBQUM5QyxvQ0FBb0Msd0VBQUssQ0FBQyxxREFBUTtBQUN6RDtBQUNPLHdCQUF3Qix5R0FBZ0I7QUFDL0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxXQUFXO0FBQ1gsZ0JBQWdCO0FBQ2hCLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCxpQyIsInNvdXJjZXMiOlsid2VicGFjazovL3doYXRzYXBwLW1ldGFtYXNrLWNsb25lLz80MDBiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgYXBwIGFuZCBkb2N1bWVudCBtb2R1bGVzLlxuaW1wb3J0IERvY3VtZW50IGZyb20gXCJwcml2YXRlLW5leHQtcGFnZXMvX2RvY3VtZW50XCI7XG5pbXBvcnQgQXBwIGZyb20gXCJwcml2YXRlLW5leHQtcGFnZXMvX2FwcFwiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcInByaXZhdGUtbmV4dC1wYWdlcy9fZXJyb3JcIjtcbi8vIFJlLWV4cG9ydCB0aGUgY29tcG9uZW50IChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgbWV0aG9kcy5cbmV4cG9ydCBjb25zdCBnZXRTdGF0aWNQcm9wcyA9IGhvaXN0KHVzZXJsYW5kLCBcImdldFN0YXRpY1Byb3BzXCIpO1xuZXhwb3J0IGNvbnN0IGdldFN0YXRpY1BhdGhzID0gaG9pc3QodXNlcmxhbmQsIFwiZ2V0U3RhdGljUGF0aHNcIik7XG5leHBvcnQgY29uc3QgZ2V0U2VydmVyU2lkZVByb3BzID0gaG9pc3QodXNlcmxhbmQsIFwiZ2V0U2VydmVyU2lkZVByb3BzXCIpO1xuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbmV4cG9ydCBjb25zdCByZXBvcnRXZWJWaXRhbHMgPSBob2lzdCh1c2VybGFuZCwgXCJyZXBvcnRXZWJWaXRhbHNcIik7XG4vLyBSZS1leHBvcnQgbGVnYWN5IG1ldGhvZHMuXG5leHBvcnQgY29uc3QgdW5zdGFibGVfZ2V0U3RhdGljUHJvcHMgPSBob2lzdCh1c2VybGFuZCwgXCJ1bnN0YWJsZV9nZXRTdGF0aWNQcm9wc1wiKTtcbmV4cG9ydCBjb25zdCB1bnN0YWJsZV9nZXRTdGF0aWNQYXRocyA9IGhvaXN0KHVzZXJsYW5kLCBcInVuc3RhYmxlX2dldFN0YXRpY1BhdGhzXCIpO1xuZXhwb3J0IGNvbnN0IHVuc3RhYmxlX2dldFN0YXRpY1BhcmFtcyA9IGhvaXN0KHVzZXJsYW5kLCBcInVuc3RhYmxlX2dldFN0YXRpY1BhcmFtc1wiKTtcbmV4cG9ydCBjb25zdCB1bnN0YWJsZV9nZXRTZXJ2ZXJQcm9wcyA9IGhvaXN0KHVzZXJsYW5kLCBcInVuc3RhYmxlX2dldFNlcnZlclByb3BzXCIpO1xuZXhwb3J0IGNvbnN0IHVuc3RhYmxlX2dldFNlcnZlclNpZGVQcm9wcyA9IGhvaXN0KHVzZXJsYW5kLCBcInVuc3RhYmxlX2dldFNlcnZlclNpZGVQcm9wc1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTLFxuICAgICAgICBwYWdlOiBcIi9fZXJyb3JcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL19lcnJvclwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICBjb21wb25lbnRzOiB7XG4gICAgICAgIEFwcCxcbiAgICAgICAgRG9jdW1lbnRcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2F_error&preferredRegion=&absolutePagePath=private-next-pages%2F_error&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "./context/P2PContext.tsx":
/*!********************************!*\
  !*** ./context/P2PContext.tsx ***!
  \********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   P2PProvider: () => (/* binding */ P2PProvider),\n/* harmony export */   useP2P: () => (/* binding */ useP2P)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _SocketContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./SocketContext */ \"./context/SocketContext.tsx\");\n/* harmony import */ var _WalletContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./WalletContext */ \"./context/WalletContext.tsx\");\n/* harmony import */ var _utils_webrtc__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/webrtc */ \"./utils/webrtc.ts\");\n/* harmony import */ var _utils_encryption__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/encryption */ \"./utils/encryption.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_SocketContext__WEBPACK_IMPORTED_MODULE_2__, _WalletContext__WEBPACK_IMPORTED_MODULE_3__]);\n([_SocketContext__WEBPACK_IMPORTED_MODULE_2__, _WalletContext__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\nconst P2PContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(undefined);\nfunction P2PProvider({ children }) {\n    const [connections, setConnections] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(new Map());\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [connectionStates, setConnectionStates] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(new Map());\n    const { socket } = (0,_SocketContext__WEBPACK_IMPORTED_MODULE_2__.useSocket)();\n    const { account, isAuthenticated } = (0,_WalletContext__WEBPACK_IMPORTED_MODULE_3__.useWallet)();\n    // Initialize secure storage with error handling\n    const [secureStorage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(()=>{\n        try {\n            return new _utils_encryption__WEBPACK_IMPORTED_MODULE_5__.SecureStorage();\n        } catch (error) {\n            console.error(\"Failed to initialize secure storage:\", error);\n            return null;\n        }\n    });\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        console.log(\"P2P Context effect:\", {\n            socket: !!socket,\n            account,\n            isAuthenticated\n        });\n        if (socket && account && isAuthenticated) {\n            console.log(\"Initializing P2P context...\");\n            setupSignalingHandlers();\n            loadStoredMessages();\n            initializeEncryption();\n        }\n    }, [\n        socket,\n        account,\n        isAuthenticated\n    ]);\n    const initializeEncryption = async ()=>{\n        try {\n            // Get or create encryption signature\n            let signature = localStorage.getItem(`encryption_sig_${account}`);\n            if (!signature) {\n                // In a real app, you'd get this from wallet signing\n                signature = `signature_${account}_${Date.now()}`;\n                localStorage.setItem(`encryption_sig_${account}`, signature);\n            }\n            const encryption = _utils_encryption__WEBPACK_IMPORTED_MODULE_5__.EncryptionManager.getInstance();\n            await encryption.initializeKey(account, signature);\n        } catch (error) {\n            console.error(\"Failed to initialize encryption:\", error);\n        }\n    };\n    const loadStoredMessages = async ()=>{\n        try {\n            if (secureStorage && account) {\n                const storedMessages = await secureStorage.getItem(`p2p_messages_${account}`);\n                if (storedMessages) {\n                    setMessages(storedMessages);\n                }\n            } else {\n                // Fallback to regular localStorage\n                const stored = localStorage.getItem(`p2p_messages_${account}`);\n                if (stored) {\n                    const parsedMessages = JSON.parse(stored);\n                    setMessages(parsedMessages);\n                }\n            }\n        } catch (error) {\n            console.error(\"Failed to load stored messages:\", error);\n            // Try fallback\n            try {\n                const stored = localStorage.getItem(`p2p_messages_${account}`);\n                if (stored) {\n                    const parsedMessages = JSON.parse(stored);\n                    setMessages(parsedMessages);\n                }\n            } catch (fallbackError) {\n                console.error(\"Fallback load also failed:\", fallbackError);\n            }\n        }\n    };\n    const saveMessages = async (newMessages)=>{\n        try {\n            if (secureStorage && account) {\n                await secureStorage.setItem(`p2p_messages_${account}`, newMessages);\n            } else {\n                // Fallback to regular localStorage if secure storage fails\n                localStorage.setItem(`p2p_messages_${account}`, JSON.stringify(newMessages));\n            }\n        } catch (error) {\n            console.error(\"Failed to save messages:\", error);\n            // Fallback to regular localStorage\n            try {\n                localStorage.setItem(`p2p_messages_${account}`, JSON.stringify(newMessages));\n            } catch (fallbackError) {\n                console.error(\"Fallback save also failed:\", fallbackError);\n            }\n        }\n    };\n    const setupSignalingHandlers = ()=>{\n        if (!socket) return;\n        // Handle WebRTC offers\n        socket.on(\"webrtc-offer\", async (data)=>{\n            console.log(\"Received WebRTC offer from:\", data.sender);\n            const connection = getOrCreateConnection(data.sender);\n            await connection.handleOffer(data.offer, data.sender);\n        });\n        // Handle WebRTC answers\n        socket.on(\"webrtc-answer\", async (data)=>{\n            console.log(\"Received WebRTC answer from:\", data.sender);\n            const connection = connections.get(data.sender);\n            if (connection) {\n                await connection.handleAnswer(data.answer);\n            }\n        });\n        // Handle ICE candidates\n        socket.on(\"webrtc-ice-candidate\", async (data)=>{\n            console.log(\"Received ICE candidate from:\", data.sender);\n            const connection = connections.get(data.sender);\n            if (connection) {\n                await connection.handleIceCandidate(data.candidate);\n            }\n        });\n        // Handle call offers\n        socket.on(\"webrtc-call-offer\", async (data)=>{\n            console.log(\"Received call offer from:\", data.sender);\n        // Handle incoming call UI here\n        });\n    };\n    const getOrCreateConnection = (targetAddress)=>{\n        let connection = connections.get(targetAddress);\n        if (!connection) {\n            console.log(\"Creating new WebRTC connection for:\", targetAddress);\n            connection = new _utils_webrtc__WEBPACK_IMPORTED_MODULE_4__.WebRTCManager(socket, account);\n            // Set up message handler\n            connection.onMessage((message)=>{\n                console.log(\"Received P2P message:\", message);\n                setMessages((prev)=>{\n                    const updated = [\n                        ...prev,\n                        message\n                    ];\n                    saveMessages(updated);\n                    return updated;\n                });\n            });\n            // Set up connection state handler\n            connection.onConnectionState((state)=>{\n                console.log(`P2P connection to ${targetAddress} state:`, state);\n                setConnectionStates((prev)=>new Map(prev.set(targetAddress, state)));\n                // If connection failed, we might want to retry or clean up\n                if (state === \"failed\" || state === \"closed\") {\n                    console.log(\"Connection failed/closed, cleaning up...\");\n                // Don't immediately remove - let user decide to retry\n                }\n            });\n            setConnections((prev)=>new Map(prev.set(targetAddress, connection)));\n        } else {\n            // Check if existing connection is in a failed state and needs reset\n            const currentState = connection.getConnectionState();\n            if (currentState === \"failed\" || currentState === \"closed\") {\n                console.log(\"Resetting failed connection for:\", targetAddress);\n                connection.reset();\n            }\n        }\n        return connection;\n    };\n    const initializeP2PConnection = async (targetAddress)=>{\n        try {\n            console.log(\"Initializing P2P connection to:\", targetAddress);\n            const connection = getOrCreateConnection(targetAddress);\n            // Set initial state\n            setConnectionStates((prev)=>new Map(prev.set(targetAddress, \"connecting\")));\n            await connection.initiateConnection(targetAddress);\n        } catch (error) {\n            console.error(\"Failed to initialize P2P connection:\", error);\n            setConnectionStates((prev)=>new Map(prev.set(targetAddress, \"failed\")));\n            throw error;\n        }\n    };\n    const sendP2PMessage = async (targetAddress, content, type = \"text\")=>{\n        try {\n            let connection = connections.get(targetAddress);\n            let retryCount = 0;\n            const maxRetries = 2;\n            while(retryCount <= maxRetries){\n                if (!connection || connection.getConnectionState() !== \"connected\") {\n                    console.log(`Attempt ${retryCount + 1} to establish P2P connection`);\n                    try {\n                        await initializeP2PConnection(targetAddress);\n                        // Wait for connection to establish (reduced timeout)\n                        await new Promise((resolve)=>setTimeout(resolve, 1000));\n                        connection = connections.get(targetAddress);\n                    } catch (connectionError) {\n                        console.error(\"Connection attempt failed:\", connectionError);\n                        retryCount++;\n                        if (retryCount <= maxRetries) {\n                            console.log(\"Retrying connection...\");\n                            await new Promise((resolve)=>setTimeout(resolve, 500));\n                            continue;\n                        } else {\n                            console.error(\"Max retries reached, giving up\");\n                            return false;\n                        }\n                    }\n                }\n                if (connection && connection.getConnectionState() === \"connected\") {\n                    const message = {\n                        id: `${Date.now()}_${Math.random()}`,\n                        type,\n                        content,\n                        timestamp: Date.now(),\n                        sender: account\n                    };\n                    const success = connection.sendMessage(message);\n                    if (success) {\n                        // Add to local messages\n                        setMessages((prev)=>{\n                            const updated = [\n                                ...prev,\n                                message\n                            ];\n                            saveMessages(updated);\n                            return updated;\n                        });\n                        return true;\n                    }\n                }\n                retryCount++;\n                if (retryCount <= maxRetries) {\n                    console.log(\"Message send failed, retrying...\");\n                    await new Promise((resolve)=>setTimeout(resolve, 300));\n                }\n            }\n            console.error(\"Failed to send P2P message after all retries\");\n            return false;\n        } catch (error) {\n            console.error(\"Error sending P2P message:\", error);\n            return false;\n        }\n    };\n    const startP2PCall = async (targetAddress, video = false)=>{\n        const connection = getOrCreateConnection(targetAddress);\n        await connection.startCall(video);\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(P2PContext.Provider, {\n        value: {\n            connections,\n            sendP2PMessage,\n            messages,\n            connectionStates,\n            initializeP2PConnection,\n            startP2PCall\n        },\n        children: children\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\Sour\\\\Documents\\\\GitHub\\\\Blockrtc\\\\context\\\\P2PContext.tsx\",\n        lineNumber: 283,\n        columnNumber: 5\n    }, this);\n}\nfunction useP2P() {\n    const context = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(P2PContext);\n    if (context === undefined) {\n        throw new Error(\"useP2P must be used within a P2PProvider\");\n    }\n    return context;\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jb250ZXh0L1AyUENvbnRleHQudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQWlGO0FBQ3RDO0FBQ0E7QUFDZ0I7QUFDVztBQVd0RSxNQUFNUywyQkFBYVQsb0RBQWFBLENBQTZCVTtBQUV0RCxTQUFTQyxZQUFZLEVBQUVDLFFBQVEsRUFBMkI7SUFDL0QsTUFBTSxDQUFDQyxhQUFhQyxlQUFlLEdBQUdYLCtDQUFRQSxDQUE2QixJQUFJWTtJQUMvRSxNQUFNLENBQUNDLFVBQVVDLFlBQVksR0FBR2QsK0NBQVFBLENBQWUsRUFBRTtJQUN6RCxNQUFNLENBQUNlLGtCQUFrQkMsb0JBQW9CLEdBQUdoQiwrQ0FBUUEsQ0FBc0IsSUFBSVk7SUFDbEYsTUFBTSxFQUFFSyxNQUFNLEVBQUUsR0FBR2hCLHlEQUFTQTtJQUM1QixNQUFNLEVBQUVpQixPQUFPLEVBQUVDLGVBQWUsRUFBRSxHQUFHakIseURBQVNBO0lBRTlDLGdEQUFnRDtJQUNoRCxNQUFNLENBQUNrQixjQUFjLEdBQUdwQiwrQ0FBUUEsQ0FBQztRQUMvQixJQUFJO1lBQ0YsT0FBTyxJQUFJSSw0REFBYUE7UUFDMUIsRUFBRSxPQUFPaUIsT0FBTztZQUNkQyxRQUFRRCxLQUFLLENBQUMsd0NBQXdDQTtZQUN0RCxPQUFPO1FBQ1Q7SUFDRjtJQUVBdEIsZ0RBQVNBLENBQUM7UUFDUnVCLFFBQVFDLEdBQUcsQ0FBQyx1QkFBdUI7WUFBRU4sUUFBUSxDQUFDLENBQUNBO1lBQVFDO1lBQVNDO1FBQWdCO1FBQ2hGLElBQUlGLFVBQVVDLFdBQVdDLGlCQUFpQjtZQUN4Q0csUUFBUUMsR0FBRyxDQUFDO1lBQ1pDO1lBQ0FDO1lBQ0FDO1FBQ0Y7SUFDRixHQUFHO1FBQUNUO1FBQVFDO1FBQVNDO0tBQWdCO0lBRXJDLE1BQU1PLHVCQUF1QjtRQUMzQixJQUFJO1lBQ0YscUNBQXFDO1lBQ3JDLElBQUlDLFlBQVlDLGFBQWFDLE9BQU8sQ0FBQyxDQUFDLGVBQWUsRUFBRVgsUUFBUSxDQUFDO1lBQ2hFLElBQUksQ0FBQ1MsV0FBVztnQkFDZCxvREFBb0Q7Z0JBQ3BEQSxZQUFZLENBQUMsVUFBVSxFQUFFVCxRQUFRLENBQUMsRUFBRVksS0FBS0MsR0FBRyxHQUFHLENBQUM7Z0JBQ2hESCxhQUFhSSxPQUFPLENBQUMsQ0FBQyxlQUFlLEVBQUVkLFFBQVEsQ0FBQyxFQUFFUztZQUNwRDtZQUVBLE1BQU1NLGFBQWE1QixnRUFBaUJBLENBQUM2QixXQUFXO1lBQ2hELE1BQU1ELFdBQVdFLGFBQWEsQ0FBQ2pCLFNBQVVTO1FBQzNDLEVBQUUsT0FBT04sT0FBTztZQUNkQyxRQUFRRCxLQUFLLENBQUMsb0NBQW9DQTtRQUNwRDtJQUNGO0lBRUEsTUFBTUkscUJBQXFCO1FBQ3pCLElBQUk7WUFDRixJQUFJTCxpQkFBaUJGLFNBQVM7Z0JBQzVCLE1BQU1rQixpQkFBaUIsTUFBTWhCLGNBQWNTLE9BQU8sQ0FBZSxDQUFDLGFBQWEsRUFBRVgsUUFBUSxDQUFDO2dCQUMxRixJQUFJa0IsZ0JBQWdCO29CQUNsQnRCLFlBQVlzQjtnQkFDZDtZQUNGLE9BQU87Z0JBQ0wsbUNBQW1DO2dCQUNuQyxNQUFNQyxTQUFTVCxhQUFhQyxPQUFPLENBQUMsQ0FBQyxhQUFhLEVBQUVYLFFBQVEsQ0FBQztnQkFDN0QsSUFBSW1CLFFBQVE7b0JBQ1YsTUFBTUMsaUJBQWlCQyxLQUFLQyxLQUFLLENBQUNIO29CQUNsQ3ZCLFlBQVl3QjtnQkFDZDtZQUNGO1FBQ0YsRUFBRSxPQUFPakIsT0FBTztZQUNkQyxRQUFRRCxLQUFLLENBQUMsbUNBQW1DQTtZQUNqRCxlQUFlO1lBQ2YsSUFBSTtnQkFDRixNQUFNZ0IsU0FBU1QsYUFBYUMsT0FBTyxDQUFDLENBQUMsYUFBYSxFQUFFWCxRQUFRLENBQUM7Z0JBQzdELElBQUltQixRQUFRO29CQUNWLE1BQU1DLGlCQUFpQkMsS0FBS0MsS0FBSyxDQUFDSDtvQkFDbEN2QixZQUFZd0I7Z0JBQ2Q7WUFDRixFQUFFLE9BQU9HLGVBQWU7Z0JBQ3RCbkIsUUFBUUQsS0FBSyxDQUFDLDhCQUE4Qm9CO1lBQzlDO1FBQ0Y7SUFDRjtJQUVBLE1BQU1DLGVBQWUsT0FBT0M7UUFDMUIsSUFBSTtZQUNGLElBQUl2QixpQkFBaUJGLFNBQVM7Z0JBQzVCLE1BQU1FLGNBQWNZLE9BQU8sQ0FBQyxDQUFDLGFBQWEsRUFBRWQsUUFBUSxDQUFDLEVBQUV5QjtZQUN6RCxPQUFPO2dCQUNMLDJEQUEyRDtnQkFDM0RmLGFBQWFJLE9BQU8sQ0FBQyxDQUFDLGFBQWEsRUFBRWQsUUFBUSxDQUFDLEVBQUVxQixLQUFLSyxTQUFTLENBQUNEO1lBQ2pFO1FBQ0YsRUFBRSxPQUFPdEIsT0FBTztZQUNkQyxRQUFRRCxLQUFLLENBQUMsNEJBQTRCQTtZQUMxQyxtQ0FBbUM7WUFDbkMsSUFBSTtnQkFDRk8sYUFBYUksT0FBTyxDQUFDLENBQUMsYUFBYSxFQUFFZCxRQUFRLENBQUMsRUFBRXFCLEtBQUtLLFNBQVMsQ0FBQ0Q7WUFDakUsRUFBRSxPQUFPRixlQUFlO2dCQUN0Qm5CLFFBQVFELEtBQUssQ0FBQyw4QkFBOEJvQjtZQUM5QztRQUNGO0lBQ0Y7SUFFQSxNQUFNakIseUJBQXlCO1FBQzdCLElBQUksQ0FBQ1AsUUFBUTtRQUViLHVCQUF1QjtRQUN2QkEsT0FBTzRCLEVBQUUsQ0FBQyxnQkFBZ0IsT0FBT0M7WUFDL0J4QixRQUFRQyxHQUFHLENBQUMsK0JBQStCdUIsS0FBS0MsTUFBTTtZQUN0RCxNQUFNQyxhQUFhQyxzQkFBc0JILEtBQUtDLE1BQU07WUFDcEQsTUFBTUMsV0FBV0UsV0FBVyxDQUFDSixLQUFLSyxLQUFLLEVBQUVMLEtBQUtDLE1BQU07UUFDdEQ7UUFFQSx3QkFBd0I7UUFDeEI5QixPQUFPNEIsRUFBRSxDQUFDLGlCQUFpQixPQUFPQztZQUNoQ3hCLFFBQVFDLEdBQUcsQ0FBQyxnQ0FBZ0N1QixLQUFLQyxNQUFNO1lBQ3ZELE1BQU1DLGFBQWF0QyxZQUFZMEMsR0FBRyxDQUFDTixLQUFLQyxNQUFNO1lBQzlDLElBQUlDLFlBQVk7Z0JBQ2QsTUFBTUEsV0FBV0ssWUFBWSxDQUFDUCxLQUFLUSxNQUFNO1lBQzNDO1FBQ0Y7UUFFQSx3QkFBd0I7UUFDeEJyQyxPQUFPNEIsRUFBRSxDQUFDLHdCQUF3QixPQUFPQztZQUN2Q3hCLFFBQVFDLEdBQUcsQ0FBQyxnQ0FBZ0N1QixLQUFLQyxNQUFNO1lBQ3ZELE1BQU1DLGFBQWF0QyxZQUFZMEMsR0FBRyxDQUFDTixLQUFLQyxNQUFNO1lBQzlDLElBQUlDLFlBQVk7Z0JBQ2QsTUFBTUEsV0FBV08sa0JBQWtCLENBQUNULEtBQUtVLFNBQVM7WUFDcEQ7UUFDRjtRQUVBLHFCQUFxQjtRQUNyQnZDLE9BQU80QixFQUFFLENBQUMscUJBQXFCLE9BQU9DO1lBQ3BDeEIsUUFBUUMsR0FBRyxDQUFDLDZCQUE2QnVCLEtBQUtDLE1BQU07UUFDcEQsK0JBQStCO1FBQ2pDO0lBQ0Y7SUFFQSxNQUFNRSx3QkFBd0IsQ0FBQ1E7UUFDN0IsSUFBSVQsYUFBYXRDLFlBQVkwQyxHQUFHLENBQUNLO1FBRWpDLElBQUksQ0FBQ1QsWUFBWTtZQUNmMUIsUUFBUUMsR0FBRyxDQUFDLHVDQUF1Q2tDO1lBQ25EVCxhQUFhLElBQUk3Qyx3REFBYUEsQ0FBQ2MsUUFBUUM7WUFFdkMseUJBQXlCO1lBQ3pCOEIsV0FBV1UsU0FBUyxDQUFDLENBQUNDO2dCQUNwQnJDLFFBQVFDLEdBQUcsQ0FBQyx5QkFBeUJvQztnQkFDckM3QyxZQUFZOEMsQ0FBQUE7b0JBQ1YsTUFBTUMsVUFBVTsyQkFBSUQ7d0JBQU1EO3FCQUFRO29CQUNsQ2pCLGFBQWFtQjtvQkFDYixPQUFPQTtnQkFDVDtZQUNGO1lBRUEsa0NBQWtDO1lBQ2xDYixXQUFXYyxpQkFBaUIsQ0FBQyxDQUFDQztnQkFDNUJ6QyxRQUFRQyxHQUFHLENBQUMsQ0FBQyxrQkFBa0IsRUFBRWtDLGNBQWMsT0FBTyxDQUFDLEVBQUVNO2dCQUN6RC9DLG9CQUFvQjRDLENBQUFBLE9BQVEsSUFBSWhELElBQUlnRCxLQUFLSSxHQUFHLENBQUNQLGVBQWVNO2dCQUU1RCwyREFBMkQ7Z0JBQzNELElBQUlBLFVBQVUsWUFBWUEsVUFBVSxVQUFVO29CQUM1Q3pDLFFBQVFDLEdBQUcsQ0FBQztnQkFDWixzREFBc0Q7Z0JBQ3hEO1lBQ0Y7WUFFQVosZUFBZWlELENBQUFBLE9BQVEsSUFBSWhELElBQUlnRCxLQUFLSSxHQUFHLENBQUNQLGVBQWVUO1FBQ3pELE9BQU87WUFDTCxvRUFBb0U7WUFDcEUsTUFBTWlCLGVBQWVqQixXQUFXa0Isa0JBQWtCO1lBQ2xELElBQUlELGlCQUFpQixZQUFZQSxpQkFBaUIsVUFBVTtnQkFDMUQzQyxRQUFRQyxHQUFHLENBQUMsb0NBQW9Da0M7Z0JBQ2hEVCxXQUFXbUIsS0FBSztZQUNsQjtRQUNGO1FBRUEsT0FBT25CO0lBQ1Q7SUFFQSxNQUFNb0IsMEJBQTBCLE9BQU9YO1FBQ3JDLElBQUk7WUFDRm5DLFFBQVFDLEdBQUcsQ0FBQyxtQ0FBbUNrQztZQUMvQyxNQUFNVCxhQUFhQyxzQkFBc0JRO1lBRXpDLG9CQUFvQjtZQUNwQnpDLG9CQUFvQjRDLENBQUFBLE9BQVEsSUFBSWhELElBQUlnRCxLQUFLSSxHQUFHLENBQUNQLGVBQWU7WUFFNUQsTUFBTVQsV0FBV3FCLGtCQUFrQixDQUFDWjtRQUN0QyxFQUFFLE9BQU9wQyxPQUFPO1lBQ2RDLFFBQVFELEtBQUssQ0FBQyx3Q0FBd0NBO1lBQ3RETCxvQkFBb0I0QyxDQUFBQSxPQUFRLElBQUloRCxJQUFJZ0QsS0FBS0ksR0FBRyxDQUFDUCxlQUFlO1lBQzVELE1BQU1wQztRQUNSO0lBQ0Y7SUFFQSxNQUFNaUQsaUJBQWlCLE9BQ3JCYixlQUNBYyxTQUNBQyxPQUFtQyxNQUFNO1FBRXpDLElBQUk7WUFDRixJQUFJeEIsYUFBYXRDLFlBQVkwQyxHQUFHLENBQUNLO1lBQ2pDLElBQUlnQixhQUFhO1lBQ2pCLE1BQU1DLGFBQWE7WUFFbkIsTUFBT0QsY0FBY0MsV0FBWTtnQkFDL0IsSUFBSSxDQUFDMUIsY0FBY0EsV0FBV2tCLGtCQUFrQixPQUFPLGFBQWE7b0JBQ2xFNUMsUUFBUUMsR0FBRyxDQUFDLENBQUMsUUFBUSxFQUFFa0QsYUFBYSxFQUFFLDRCQUE0QixDQUFDO29CQUVuRSxJQUFJO3dCQUNGLE1BQU1MLHdCQUF3Qlg7d0JBRTlCLHFEQUFxRDt3QkFDckQsTUFBTSxJQUFJa0IsUUFBUUMsQ0FBQUEsVUFBV0MsV0FBV0QsU0FBUzt3QkFFakQ1QixhQUFhdEMsWUFBWTBDLEdBQUcsQ0FBQ0s7b0JBQy9CLEVBQUUsT0FBT3FCLGlCQUFpQjt3QkFDeEJ4RCxRQUFRRCxLQUFLLENBQUMsOEJBQThCeUQ7d0JBQzVDTDt3QkFFQSxJQUFJQSxjQUFjQyxZQUFZOzRCQUM1QnBELFFBQVFDLEdBQUcsQ0FBQzs0QkFDWixNQUFNLElBQUlvRCxRQUFRQyxDQUFBQSxVQUFXQyxXQUFXRCxTQUFTOzRCQUNqRDt3QkFDRixPQUFPOzRCQUNMdEQsUUFBUUQsS0FBSyxDQUFDOzRCQUNkLE9BQU87d0JBQ1Q7b0JBQ0Y7Z0JBQ0Y7Z0JBRUEsSUFBSTJCLGNBQWNBLFdBQVdrQixrQkFBa0IsT0FBTyxhQUFhO29CQUNqRSxNQUFNUCxVQUFzQjt3QkFDMUJvQixJQUFJLENBQUMsRUFBRWpELEtBQUtDLEdBQUcsR0FBRyxDQUFDLEVBQUVpRCxLQUFLQyxNQUFNLEdBQUcsQ0FBQzt3QkFDcENUO3dCQUNBRDt3QkFDQVcsV0FBV3BELEtBQUtDLEdBQUc7d0JBQ25CZ0IsUUFBUTdCO29CQUNWO29CQUVBLE1BQU1pRSxVQUFVbkMsV0FBV29DLFdBQVcsQ0FBQ3pCO29CQUV2QyxJQUFJd0IsU0FBUzt3QkFDWCx3QkFBd0I7d0JBQ3hCckUsWUFBWThDLENBQUFBOzRCQUNWLE1BQU1DLFVBQVU7bUNBQUlEO2dDQUFNRDs2QkFBUTs0QkFDbENqQixhQUFhbUI7NEJBQ2IsT0FBT0E7d0JBQ1Q7d0JBQ0EsT0FBTztvQkFDVDtnQkFDRjtnQkFFQVk7Z0JBQ0EsSUFBSUEsY0FBY0MsWUFBWTtvQkFDNUJwRCxRQUFRQyxHQUFHLENBQUM7b0JBQ1osTUFBTSxJQUFJb0QsUUFBUUMsQ0FBQUEsVUFBV0MsV0FBV0QsU0FBUztnQkFDbkQ7WUFDRjtZQUVBdEQsUUFBUUQsS0FBSyxDQUFDO1lBQ2QsT0FBTztRQUNULEVBQUUsT0FBT0EsT0FBTztZQUNkQyxRQUFRRCxLQUFLLENBQUMsOEJBQThCQTtZQUM1QyxPQUFPO1FBQ1Q7SUFDRjtJQUVBLE1BQU1nRSxlQUFlLE9BQU81QixlQUF1QjZCLFFBQWlCLEtBQUs7UUFDdkUsTUFBTXRDLGFBQWFDLHNCQUFzQlE7UUFDekMsTUFBTVQsV0FBV3VDLFNBQVMsQ0FBQ0Q7SUFDN0I7SUFFQSxxQkFDRSw4REFBQ2hGLFdBQVdrRixRQUFRO1FBQUNDLE9BQU87WUFDMUIvRTtZQUNBNEQ7WUFDQXpEO1lBQ0FFO1lBQ0FxRDtZQUNBaUI7UUFDRjtrQkFDRzVFOzs7Ozs7QUFHUDtBQUVPLFNBQVNpRjtJQUNkLE1BQU1DLFVBQVU3RixpREFBVUEsQ0FBQ1E7SUFDM0IsSUFBSXFGLFlBQVlwRixXQUFXO1FBQ3pCLE1BQU0sSUFBSXFGLE1BQU07SUFDbEI7SUFDQSxPQUFPRDtBQUNUIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2hhdHNhcHAtbWV0YW1hc2stY2xvbmUvLi9jb250ZXh0L1AyUENvbnRleHQudHN4PzdlNzEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ29udGV4dCwgdXNlQ29udGV4dCwgdXNlRWZmZWN0LCB1c2VTdGF0ZSwgUmVhY3ROb2RlIH0gZnJvbSAncmVhY3QnXHJcbmltcG9ydCB7IHVzZVNvY2tldCB9IGZyb20gJy4vU29ja2V0Q29udGV4dCdcclxuaW1wb3J0IHsgdXNlV2FsbGV0IH0gZnJvbSAnLi9XYWxsZXRDb250ZXh0J1xyXG5pbXBvcnQgeyBXZWJSVENNYW5hZ2VyLCBQMlBNZXNzYWdlIH0gZnJvbSAnLi4vdXRpbHMvd2VicnRjJ1xyXG5pbXBvcnQgeyBTZWN1cmVTdG9yYWdlLCBFbmNyeXB0aW9uTWFuYWdlciB9IGZyb20gJy4uL3V0aWxzL2VuY3J5cHRpb24nXHJcblxyXG5pbnRlcmZhY2UgUDJQQ29udGV4dFR5cGUge1xyXG4gIGNvbm5lY3Rpb25zOiBNYXA8c3RyaW5nLCBXZWJSVENNYW5hZ2VyPlxyXG4gIHNlbmRQMlBNZXNzYWdlOiAodGFyZ2V0QWRkcmVzczogc3RyaW5nLCBjb250ZW50OiBzdHJpbmcsIHR5cGU/OiAndGV4dCcgfCAnYXVkaW8nIHwgJ3ZpZGVvJykgPT4gUHJvbWlzZTxib29sZWFuPlxyXG4gIG1lc3NhZ2VzOiBQMlBNZXNzYWdlW11cclxuICBjb25uZWN0aW9uU3RhdGVzOiBNYXA8c3RyaW5nLCBzdHJpbmc+XHJcbiAgaW5pdGlhbGl6ZVAyUENvbm5lY3Rpb246ICh0YXJnZXRBZGRyZXNzOiBzdHJpbmcpID0+IFByb21pc2U8dm9pZD5cclxuICBzdGFydFAyUENhbGw6ICh0YXJnZXRBZGRyZXNzOiBzdHJpbmcsIHZpZGVvPzogYm9vbGVhbikgPT4gUHJvbWlzZTx2b2lkPlxyXG59XHJcblxyXG5jb25zdCBQMlBDb250ZXh0ID0gY3JlYXRlQ29udGV4dDxQMlBDb250ZXh0VHlwZSB8IHVuZGVmaW5lZD4odW5kZWZpbmVkKVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIFAyUFByb3ZpZGVyKHsgY2hpbGRyZW4gfTogeyBjaGlsZHJlbjogUmVhY3ROb2RlIH0pIHtcclxuICBjb25zdCBbY29ubmVjdGlvbnMsIHNldENvbm5lY3Rpb25zXSA9IHVzZVN0YXRlPE1hcDxzdHJpbmcsIFdlYlJUQ01hbmFnZXI+PihuZXcgTWFwKCkpXHJcbiAgY29uc3QgW21lc3NhZ2VzLCBzZXRNZXNzYWdlc10gPSB1c2VTdGF0ZTxQMlBNZXNzYWdlW10+KFtdKVxyXG4gIGNvbnN0IFtjb25uZWN0aW9uU3RhdGVzLCBzZXRDb25uZWN0aW9uU3RhdGVzXSA9IHVzZVN0YXRlPE1hcDxzdHJpbmcsIHN0cmluZz4+KG5ldyBNYXAoKSlcclxuICBjb25zdCB7IHNvY2tldCB9ID0gdXNlU29ja2V0KClcclxuICBjb25zdCB7IGFjY291bnQsIGlzQXV0aGVudGljYXRlZCB9ID0gdXNlV2FsbGV0KClcclxuICBcclxuICAvLyBJbml0aWFsaXplIHNlY3VyZSBzdG9yYWdlIHdpdGggZXJyb3IgaGFuZGxpbmdcclxuICBjb25zdCBbc2VjdXJlU3RvcmFnZV0gPSB1c2VTdGF0ZSgoKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICByZXR1cm4gbmV3IFNlY3VyZVN0b3JhZ2UoKVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGluaXRpYWxpemUgc2VjdXJlIHN0b3JhZ2U6JywgZXJyb3IpXHJcbiAgICAgIHJldHVybiBudWxsXHJcbiAgICB9XHJcbiAgfSlcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKCdQMlAgQ29udGV4dCBlZmZlY3Q6JywgeyBzb2NrZXQ6ICEhc29ja2V0LCBhY2NvdW50LCBpc0F1dGhlbnRpY2F0ZWQgfSlcclxuICAgIGlmIChzb2NrZXQgJiYgYWNjb3VudCAmJiBpc0F1dGhlbnRpY2F0ZWQpIHtcclxuICAgICAgY29uc29sZS5sb2coJ0luaXRpYWxpemluZyBQMlAgY29udGV4dC4uLicpXHJcbiAgICAgIHNldHVwU2lnbmFsaW5nSGFuZGxlcnMoKVxyXG4gICAgICBsb2FkU3RvcmVkTWVzc2FnZXMoKVxyXG4gICAgICBpbml0aWFsaXplRW5jcnlwdGlvbigpXHJcbiAgICB9XHJcbiAgfSwgW3NvY2tldCwgYWNjb3VudCwgaXNBdXRoZW50aWNhdGVkXSlcclxuXHJcbiAgY29uc3QgaW5pdGlhbGl6ZUVuY3J5cHRpb24gPSBhc3luYyAoKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBHZXQgb3IgY3JlYXRlIGVuY3J5cHRpb24gc2lnbmF0dXJlXHJcbiAgICAgIGxldCBzaWduYXR1cmUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShgZW5jcnlwdGlvbl9zaWdfJHthY2NvdW50fWApXHJcbiAgICAgIGlmICghc2lnbmF0dXJlKSB7XHJcbiAgICAgICAgLy8gSW4gYSByZWFsIGFwcCwgeW91J2QgZ2V0IHRoaXMgZnJvbSB3YWxsZXQgc2lnbmluZ1xyXG4gICAgICAgIHNpZ25hdHVyZSA9IGBzaWduYXR1cmVfJHthY2NvdW50fV8ke0RhdGUubm93KCl9YFxyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGBlbmNyeXB0aW9uX3NpZ18ke2FjY291bnR9YCwgc2lnbmF0dXJlKVxyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBlbmNyeXB0aW9uID0gRW5jcnlwdGlvbk1hbmFnZXIuZ2V0SW5zdGFuY2UoKVxyXG4gICAgICBhd2FpdCBlbmNyeXB0aW9uLmluaXRpYWxpemVLZXkoYWNjb3VudCEsIHNpZ25hdHVyZSlcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBpbml0aWFsaXplIGVuY3J5cHRpb246JywgZXJyb3IpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb25zdCBsb2FkU3RvcmVkTWVzc2FnZXMgPSBhc3luYyAoKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBpZiAoc2VjdXJlU3RvcmFnZSAmJiBhY2NvdW50KSB7XHJcbiAgICAgICAgY29uc3Qgc3RvcmVkTWVzc2FnZXMgPSBhd2FpdCBzZWN1cmVTdG9yYWdlLmdldEl0ZW08UDJQTWVzc2FnZVtdPihgcDJwX21lc3NhZ2VzXyR7YWNjb3VudH1gKVxyXG4gICAgICAgIGlmIChzdG9yZWRNZXNzYWdlcykge1xyXG4gICAgICAgICAgc2V0TWVzc2FnZXMoc3RvcmVkTWVzc2FnZXMpXHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIEZhbGxiYWNrIHRvIHJlZ3VsYXIgbG9jYWxTdG9yYWdlXHJcbiAgICAgICAgY29uc3Qgc3RvcmVkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oYHAycF9tZXNzYWdlc18ke2FjY291bnR9YClcclxuICAgICAgICBpZiAoc3RvcmVkKSB7XHJcbiAgICAgICAgICBjb25zdCBwYXJzZWRNZXNzYWdlcyA9IEpTT04ucGFyc2Uoc3RvcmVkKVxyXG4gICAgICAgICAgc2V0TWVzc2FnZXMocGFyc2VkTWVzc2FnZXMpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbG9hZCBzdG9yZWQgbWVzc2FnZXM6JywgZXJyb3IpXHJcbiAgICAgIC8vIFRyeSBmYWxsYmFja1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHN0b3JlZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGBwMnBfbWVzc2FnZXNfJHthY2NvdW50fWApXHJcbiAgICAgICAgaWYgKHN0b3JlZCkge1xyXG4gICAgICAgICAgY29uc3QgcGFyc2VkTWVzc2FnZXMgPSBKU09OLnBhcnNlKHN0b3JlZClcclxuICAgICAgICAgIHNldE1lc3NhZ2VzKHBhcnNlZE1lc3NhZ2VzKVxyXG4gICAgICAgIH1cclxuICAgICAgfSBjYXRjaCAoZmFsbGJhY2tFcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhbGxiYWNrIGxvYWQgYWxzbyBmYWlsZWQ6JywgZmFsbGJhY2tFcnJvcilcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29uc3Qgc2F2ZU1lc3NhZ2VzID0gYXN5bmMgKG5ld01lc3NhZ2VzOiBQMlBNZXNzYWdlW10pID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGlmIChzZWN1cmVTdG9yYWdlICYmIGFjY291bnQpIHtcclxuICAgICAgICBhd2FpdCBzZWN1cmVTdG9yYWdlLnNldEl0ZW0oYHAycF9tZXNzYWdlc18ke2FjY291bnR9YCwgbmV3TWVzc2FnZXMpXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gRmFsbGJhY2sgdG8gcmVndWxhciBsb2NhbFN0b3JhZ2UgaWYgc2VjdXJlIHN0b3JhZ2UgZmFpbHNcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShgcDJwX21lc3NhZ2VzXyR7YWNjb3VudH1gLCBKU09OLnN0cmluZ2lmeShuZXdNZXNzYWdlcykpXHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBzYXZlIG1lc3NhZ2VzOicsIGVycm9yKVxyXG4gICAgICAvLyBGYWxsYmFjayB0byByZWd1bGFyIGxvY2FsU3RvcmFnZVxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGBwMnBfbWVzc2FnZXNfJHthY2NvdW50fWAsIEpTT04uc3RyaW5naWZ5KG5ld01lc3NhZ2VzKSlcclxuICAgICAgfSBjYXRjaCAoZmFsbGJhY2tFcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhbGxiYWNrIHNhdmUgYWxzbyBmYWlsZWQ6JywgZmFsbGJhY2tFcnJvcilcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29uc3Qgc2V0dXBTaWduYWxpbmdIYW5kbGVycyA9ICgpID0+IHtcclxuICAgIGlmICghc29ja2V0KSByZXR1cm5cclxuXHJcbiAgICAvLyBIYW5kbGUgV2ViUlRDIG9mZmVyc1xyXG4gICAgc29ja2V0Lm9uKCd3ZWJydGMtb2ZmZXInLCBhc3luYyAoZGF0YTogYW55KSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdSZWNlaXZlZCBXZWJSVEMgb2ZmZXIgZnJvbTonLCBkYXRhLnNlbmRlcilcclxuICAgICAgY29uc3QgY29ubmVjdGlvbiA9IGdldE9yQ3JlYXRlQ29ubmVjdGlvbihkYXRhLnNlbmRlcilcclxuICAgICAgYXdhaXQgY29ubmVjdGlvbi5oYW5kbGVPZmZlcihkYXRhLm9mZmVyLCBkYXRhLnNlbmRlcilcclxuICAgIH0pXHJcblxyXG4gICAgLy8gSGFuZGxlIFdlYlJUQyBhbnN3ZXJzXHJcbiAgICBzb2NrZXQub24oJ3dlYnJ0Yy1hbnN3ZXInLCBhc3luYyAoZGF0YTogYW55KSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdSZWNlaXZlZCBXZWJSVEMgYW5zd2VyIGZyb206JywgZGF0YS5zZW5kZXIpXHJcbiAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBjb25uZWN0aW9ucy5nZXQoZGF0YS5zZW5kZXIpXHJcbiAgICAgIGlmIChjb25uZWN0aW9uKSB7XHJcbiAgICAgICAgYXdhaXQgY29ubmVjdGlvbi5oYW5kbGVBbnN3ZXIoZGF0YS5hbnN3ZXIpXHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgLy8gSGFuZGxlIElDRSBjYW5kaWRhdGVzXHJcbiAgICBzb2NrZXQub24oJ3dlYnJ0Yy1pY2UtY2FuZGlkYXRlJywgYXN5bmMgKGRhdGE6IGFueSkgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZygnUmVjZWl2ZWQgSUNFIGNhbmRpZGF0ZSBmcm9tOicsIGRhdGEuc2VuZGVyKVxyXG4gICAgICBjb25zdCBjb25uZWN0aW9uID0gY29ubmVjdGlvbnMuZ2V0KGRhdGEuc2VuZGVyKVxyXG4gICAgICBpZiAoY29ubmVjdGlvbikge1xyXG4gICAgICAgIGF3YWl0IGNvbm5lY3Rpb24uaGFuZGxlSWNlQ2FuZGlkYXRlKGRhdGEuY2FuZGlkYXRlKVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIC8vIEhhbmRsZSBjYWxsIG9mZmVyc1xyXG4gICAgc29ja2V0Lm9uKCd3ZWJydGMtY2FsbC1vZmZlcicsIGFzeW5jIChkYXRhOiBhbnkpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coJ1JlY2VpdmVkIGNhbGwgb2ZmZXIgZnJvbTonLCBkYXRhLnNlbmRlcilcclxuICAgICAgLy8gSGFuZGxlIGluY29taW5nIGNhbGwgVUkgaGVyZVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGNvbnN0IGdldE9yQ3JlYXRlQ29ubmVjdGlvbiA9ICh0YXJnZXRBZGRyZXNzOiBzdHJpbmcpOiBXZWJSVENNYW5hZ2VyID0+IHtcclxuICAgIGxldCBjb25uZWN0aW9uID0gY29ubmVjdGlvbnMuZ2V0KHRhcmdldEFkZHJlc3MpXHJcbiAgICBcclxuICAgIGlmICghY29ubmVjdGlvbikge1xyXG4gICAgICBjb25zb2xlLmxvZygnQ3JlYXRpbmcgbmV3IFdlYlJUQyBjb25uZWN0aW9uIGZvcjonLCB0YXJnZXRBZGRyZXNzKVxyXG4gICAgICBjb25uZWN0aW9uID0gbmV3IFdlYlJUQ01hbmFnZXIoc29ja2V0LCBhY2NvdW50ISlcclxuICAgICAgXHJcbiAgICAgIC8vIFNldCB1cCBtZXNzYWdlIGhhbmRsZXJcclxuICAgICAgY29ubmVjdGlvbi5vbk1lc3NhZ2UoKG1lc3NhZ2U6IFAyUE1lc3NhZ2UpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZygnUmVjZWl2ZWQgUDJQIG1lc3NhZ2U6JywgbWVzc2FnZSlcclxuICAgICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IHtcclxuICAgICAgICAgIGNvbnN0IHVwZGF0ZWQgPSBbLi4ucHJldiwgbWVzc2FnZV1cclxuICAgICAgICAgIHNhdmVNZXNzYWdlcyh1cGRhdGVkKVxyXG4gICAgICAgICAgcmV0dXJuIHVwZGF0ZWRcclxuICAgICAgICB9KVxyXG4gICAgICB9KVxyXG5cclxuICAgICAgLy8gU2V0IHVwIGNvbm5lY3Rpb24gc3RhdGUgaGFuZGxlclxyXG4gICAgICBjb25uZWN0aW9uLm9uQ29ubmVjdGlvblN0YXRlKChzdGF0ZTogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYFAyUCBjb25uZWN0aW9uIHRvICR7dGFyZ2V0QWRkcmVzc30gc3RhdGU6YCwgc3RhdGUpXHJcbiAgICAgICAgc2V0Q29ubmVjdGlvblN0YXRlcyhwcmV2ID0+IG5ldyBNYXAocHJldi5zZXQodGFyZ2V0QWRkcmVzcywgc3RhdGUpKSlcclxuICAgICAgICBcclxuICAgICAgICAvLyBJZiBjb25uZWN0aW9uIGZhaWxlZCwgd2UgbWlnaHQgd2FudCB0byByZXRyeSBvciBjbGVhbiB1cFxyXG4gICAgICAgIGlmIChzdGF0ZSA9PT0gJ2ZhaWxlZCcgfHwgc3RhdGUgPT09ICdjbG9zZWQnKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnQ29ubmVjdGlvbiBmYWlsZWQvY2xvc2VkLCBjbGVhbmluZyB1cC4uLicpXHJcbiAgICAgICAgICAvLyBEb24ndCBpbW1lZGlhdGVseSByZW1vdmUgLSBsZXQgdXNlciBkZWNpZGUgdG8gcmV0cnlcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcblxyXG4gICAgICBzZXRDb25uZWN0aW9ucyhwcmV2ID0+IG5ldyBNYXAocHJldi5zZXQodGFyZ2V0QWRkcmVzcywgY29ubmVjdGlvbiEpKSlcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIENoZWNrIGlmIGV4aXN0aW5nIGNvbm5lY3Rpb24gaXMgaW4gYSBmYWlsZWQgc3RhdGUgYW5kIG5lZWRzIHJlc2V0XHJcbiAgICAgIGNvbnN0IGN1cnJlbnRTdGF0ZSA9IGNvbm5lY3Rpb24uZ2V0Q29ubmVjdGlvblN0YXRlKClcclxuICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gJ2ZhaWxlZCcgfHwgY3VycmVudFN0YXRlID09PSAnY2xvc2VkJykge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdSZXNldHRpbmcgZmFpbGVkIGNvbm5lY3Rpb24gZm9yOicsIHRhcmdldEFkZHJlc3MpXHJcbiAgICAgICAgY29ubmVjdGlvbi5yZXNldCgpXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gY29ubmVjdGlvblxyXG4gIH1cclxuXHJcbiAgY29uc3QgaW5pdGlhbGl6ZVAyUENvbm5lY3Rpb24gPSBhc3luYyAodGFyZ2V0QWRkcmVzczogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zb2xlLmxvZygnSW5pdGlhbGl6aW5nIFAyUCBjb25uZWN0aW9uIHRvOicsIHRhcmdldEFkZHJlc3MpXHJcbiAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBnZXRPckNyZWF0ZUNvbm5lY3Rpb24odGFyZ2V0QWRkcmVzcylcclxuICAgICAgXHJcbiAgICAgIC8vIFNldCBpbml0aWFsIHN0YXRlXHJcbiAgICAgIHNldENvbm5lY3Rpb25TdGF0ZXMocHJldiA9PiBuZXcgTWFwKHByZXYuc2V0KHRhcmdldEFkZHJlc3MsICdjb25uZWN0aW5nJykpKVxyXG4gICAgICBcclxuICAgICAgYXdhaXQgY29ubmVjdGlvbi5pbml0aWF0ZUNvbm5lY3Rpb24odGFyZ2V0QWRkcmVzcylcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBpbml0aWFsaXplIFAyUCBjb25uZWN0aW9uOicsIGVycm9yKVxyXG4gICAgICBzZXRDb25uZWN0aW9uU3RhdGVzKHByZXYgPT4gbmV3IE1hcChwcmV2LnNldCh0YXJnZXRBZGRyZXNzLCAnZmFpbGVkJykpKVxyXG4gICAgICB0aHJvdyBlcnJvclxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29uc3Qgc2VuZFAyUE1lc3NhZ2UgPSBhc3luYyAoXHJcbiAgICB0YXJnZXRBZGRyZXNzOiBzdHJpbmcsIFxyXG4gICAgY29udGVudDogc3RyaW5nLCBcclxuICAgIHR5cGU6ICd0ZXh0JyB8ICdhdWRpbycgfCAndmlkZW8nID0gJ3RleHQnXHJcbiAgKTogUHJvbWlzZTxib29sZWFuPiA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBsZXQgY29ubmVjdGlvbiA9IGNvbm5lY3Rpb25zLmdldCh0YXJnZXRBZGRyZXNzKVxyXG4gICAgICBsZXQgcmV0cnlDb3VudCA9IDBcclxuICAgICAgY29uc3QgbWF4UmV0cmllcyA9IDJcclxuXHJcbiAgICAgIHdoaWxlIChyZXRyeUNvdW50IDw9IG1heFJldHJpZXMpIHtcclxuICAgICAgICBpZiAoIWNvbm5lY3Rpb24gfHwgY29ubmVjdGlvbi5nZXRDb25uZWN0aW9uU3RhdGUoKSAhPT0gJ2Nvbm5lY3RlZCcpIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGBBdHRlbXB0ICR7cmV0cnlDb3VudCArIDF9IHRvIGVzdGFibGlzaCBQMlAgY29ubmVjdGlvbmApXHJcbiAgICAgICAgICBcclxuICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGF3YWl0IGluaXRpYWxpemVQMlBDb25uZWN0aW9uKHRhcmdldEFkZHJlc3MpXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBXYWl0IGZvciBjb25uZWN0aW9uIHRvIGVzdGFibGlzaCAocmVkdWNlZCB0aW1lb3V0KVxyXG4gICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTAwMCkpXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25uZWN0aW9uID0gY29ubmVjdGlvbnMuZ2V0KHRhcmdldEFkZHJlc3MpXHJcbiAgICAgICAgICB9IGNhdGNoIChjb25uZWN0aW9uRXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignQ29ubmVjdGlvbiBhdHRlbXB0IGZhaWxlZDonLCBjb25uZWN0aW9uRXJyb3IpXHJcbiAgICAgICAgICAgIHJldHJ5Q291bnQrK1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHJldHJ5Q291bnQgPD0gbWF4UmV0cmllcykge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdSZXRyeWluZyBjb25uZWN0aW9uLi4uJylcclxuICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgNTAwKSlcclxuICAgICAgICAgICAgICBjb250aW51ZVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ01heCByZXRyaWVzIHJlYWNoZWQsIGdpdmluZyB1cCcpXHJcbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjb25uZWN0aW9uICYmIGNvbm5lY3Rpb24uZ2V0Q29ubmVjdGlvblN0YXRlKCkgPT09ICdjb25uZWN0ZWQnKSB7XHJcbiAgICAgICAgICBjb25zdCBtZXNzYWdlOiBQMlBNZXNzYWdlID0ge1xyXG4gICAgICAgICAgICBpZDogYCR7RGF0ZS5ub3coKX1fJHtNYXRoLnJhbmRvbSgpfWAsXHJcbiAgICAgICAgICAgIHR5cGUsXHJcbiAgICAgICAgICAgIGNvbnRlbnQsXHJcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcclxuICAgICAgICAgICAgc2VuZGVyOiBhY2NvdW50IVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGNvbnN0IHN1Y2Nlc3MgPSBjb25uZWN0aW9uLnNlbmRNZXNzYWdlKG1lc3NhZ2UpXHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGlmIChzdWNjZXNzKSB7XHJcbiAgICAgICAgICAgIC8vIEFkZCB0byBsb2NhbCBtZXNzYWdlc1xyXG4gICAgICAgICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IHtcclxuICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkID0gWy4uLnByZXYsIG1lc3NhZ2VdXHJcbiAgICAgICAgICAgICAgc2F2ZU1lc3NhZ2VzKHVwZGF0ZWQpXHJcbiAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZWRcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHJ5Q291bnQrK1xyXG4gICAgICAgIGlmIChyZXRyeUNvdW50IDw9IG1heFJldHJpZXMpIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdNZXNzYWdlIHNlbmQgZmFpbGVkLCByZXRyeWluZy4uLicpXHJcbiAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMzAwKSlcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBzZW5kIFAyUCBtZXNzYWdlIGFmdGVyIGFsbCByZXRyaWVzJylcclxuICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzZW5kaW5nIFAyUCBtZXNzYWdlOicsIGVycm9yKVxyXG4gICAgICByZXR1cm4gZmFsc2VcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNvbnN0IHN0YXJ0UDJQQ2FsbCA9IGFzeW5jICh0YXJnZXRBZGRyZXNzOiBzdHJpbmcsIHZpZGVvOiBib29sZWFuID0gZmFsc2UpOiBQcm9taXNlPHZvaWQ+ID0+IHtcclxuICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBnZXRPckNyZWF0ZUNvbm5lY3Rpb24odGFyZ2V0QWRkcmVzcylcclxuICAgIGF3YWl0IGNvbm5lY3Rpb24uc3RhcnRDYWxsKHZpZGVvKVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxQMlBDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXt7XHJcbiAgICAgIGNvbm5lY3Rpb25zLFxyXG4gICAgICBzZW5kUDJQTWVzc2FnZSxcclxuICAgICAgbWVzc2FnZXMsXHJcbiAgICAgIGNvbm5lY3Rpb25TdGF0ZXMsXHJcbiAgICAgIGluaXRpYWxpemVQMlBDb25uZWN0aW9uLFxyXG4gICAgICBzdGFydFAyUENhbGxcclxuICAgIH19PlxyXG4gICAgICB7Y2hpbGRyZW59XHJcbiAgICA8L1AyUENvbnRleHQuUHJvdmlkZXI+XHJcbiAgKVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdXNlUDJQKCkge1xyXG4gIGNvbnN0IGNvbnRleHQgPSB1c2VDb250ZXh0KFAyUENvbnRleHQpXHJcbiAgaWYgKGNvbnRleHQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCd1c2VQMlAgbXVzdCBiZSB1c2VkIHdpdGhpbiBhIFAyUFByb3ZpZGVyJylcclxuICB9XHJcbiAgcmV0dXJuIGNvbnRleHRcclxufSJdLCJuYW1lcyI6WyJjcmVhdGVDb250ZXh0IiwidXNlQ29udGV4dCIsInVzZUVmZmVjdCIsInVzZVN0YXRlIiwidXNlU29ja2V0IiwidXNlV2FsbGV0IiwiV2ViUlRDTWFuYWdlciIsIlNlY3VyZVN0b3JhZ2UiLCJFbmNyeXB0aW9uTWFuYWdlciIsIlAyUENvbnRleHQiLCJ1bmRlZmluZWQiLCJQMlBQcm92aWRlciIsImNoaWxkcmVuIiwiY29ubmVjdGlvbnMiLCJzZXRDb25uZWN0aW9ucyIsIk1hcCIsIm1lc3NhZ2VzIiwic2V0TWVzc2FnZXMiLCJjb25uZWN0aW9uU3RhdGVzIiwic2V0Q29ubmVjdGlvblN0YXRlcyIsInNvY2tldCIsImFjY291bnQiLCJpc0F1dGhlbnRpY2F0ZWQiLCJzZWN1cmVTdG9yYWdlIiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIiwic2V0dXBTaWduYWxpbmdIYW5kbGVycyIsImxvYWRTdG9yZWRNZXNzYWdlcyIsImluaXRpYWxpemVFbmNyeXB0aW9uIiwic2lnbmF0dXJlIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsIkRhdGUiLCJub3ciLCJzZXRJdGVtIiwiZW5jcnlwdGlvbiIsImdldEluc3RhbmNlIiwiaW5pdGlhbGl6ZUtleSIsInN0b3JlZE1lc3NhZ2VzIiwic3RvcmVkIiwicGFyc2VkTWVzc2FnZXMiLCJKU09OIiwicGFyc2UiLCJmYWxsYmFja0Vycm9yIiwic2F2ZU1lc3NhZ2VzIiwibmV3TWVzc2FnZXMiLCJzdHJpbmdpZnkiLCJvbiIsImRhdGEiLCJzZW5kZXIiLCJjb25uZWN0aW9uIiwiZ2V0T3JDcmVhdGVDb25uZWN0aW9uIiwiaGFuZGxlT2ZmZXIiLCJvZmZlciIsImdldCIsImhhbmRsZUFuc3dlciIsImFuc3dlciIsImhhbmRsZUljZUNhbmRpZGF0ZSIsImNhbmRpZGF0ZSIsInRhcmdldEFkZHJlc3MiLCJvbk1lc3NhZ2UiLCJtZXNzYWdlIiwicHJldiIsInVwZGF0ZWQiLCJvbkNvbm5lY3Rpb25TdGF0ZSIsInN0YXRlIiwic2V0IiwiY3VycmVudFN0YXRlIiwiZ2V0Q29ubmVjdGlvblN0YXRlIiwicmVzZXQiLCJpbml0aWFsaXplUDJQQ29ubmVjdGlvbiIsImluaXRpYXRlQ29ubmVjdGlvbiIsInNlbmRQMlBNZXNzYWdlIiwiY29udGVudCIsInR5cGUiLCJyZXRyeUNvdW50IiwibWF4UmV0cmllcyIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsImNvbm5lY3Rpb25FcnJvciIsImlkIiwiTWF0aCIsInJhbmRvbSIsInRpbWVzdGFtcCIsInN1Y2Nlc3MiLCJzZW5kTWVzc2FnZSIsInN0YXJ0UDJQQ2FsbCIsInZpZGVvIiwic3RhcnRDYWxsIiwiUHJvdmlkZXIiLCJ2YWx1ZSIsInVzZVAyUCIsImNvbnRleHQiLCJFcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./context/P2PContext.tsx\n");

/***/ }),

/***/ "./context/SocketContext.tsx":
/*!***********************************!*\
  !*** ./context/SocketContext.tsx ***!
  \***********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SocketProvider: () => (/* binding */ SocketProvider),\n/* harmony export */   useSocket: () => (/* binding */ useSocket)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var socket_io_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! socket.io-client */ \"socket.io-client\");\n/* harmony import */ var _WalletContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./WalletContext */ \"./context/WalletContext.tsx\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([socket_io_client__WEBPACK_IMPORTED_MODULE_2__, _WalletContext__WEBPACK_IMPORTED_MODULE_3__]);\n([socket_io_client__WEBPACK_IMPORTED_MODULE_2__, _WalletContext__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\nconst SocketContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(undefined);\nfunction SocketProvider({ children }) {\n    const [socket, setSocket] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [onlineUsers, setOnlineUsers] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const { account, isConnected, isAuthenticated } = (0,_WalletContext__WEBPACK_IMPORTED_MODULE_3__.useWallet)();\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (isConnected && isAuthenticated && account) {\n            console.log(\"Connecting socket for user:\", account);\n            const newSocket = (0,socket_io_client__WEBPACK_IMPORTED_MODULE_2__.io)(\"http://localhost:3001\", {\n                query: {\n                    userId: account\n                }\n            });\n            newSocket.on(\"connect\", ()=>{\n                console.log(\"Socket connected:\", newSocket.id);\n                // Join with user ID when connected\n                newSocket.emit(\"join\", account);\n                console.log(\"Emitted join event for user:\", account);\n            });\n            newSocket.on(\"getOnlineUsers\", (users)=>{\n                console.log(\"Online users updated:\", users);\n                setOnlineUsers(users);\n            });\n            newSocket.on(\"disconnect\", ()=>{\n                console.log(\"Socket disconnected\");\n            });\n            setSocket(newSocket);\n            return ()=>{\n                console.log(\"Closing socket connection\");\n                newSocket.close();\n            };\n        } else {\n            // Clear socket if not authenticated\n            if (socket) {\n                socket.close();\n                setSocket(null);\n            }\n        }\n    }, [\n        isConnected,\n        isAuthenticated,\n        account\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(SocketContext.Provider, {\n        value: {\n            socket,\n            onlineUsers\n        },\n        children: children\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\Sour\\\\Documents\\\\GitHub\\\\Blockrtc\\\\context\\\\SocketContext.tsx\",\n        lineNumber: 57,\n        columnNumber: 5\n    }, this);\n}\nfunction useSocket() {\n    const context = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(SocketContext);\n    if (context === undefined) {\n        throw new Error(\"useSocket must be used within a SocketProvider\");\n    }\n    return context;\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jb250ZXh0L1NvY2tldENvbnRleHQudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFpRjtBQUNwQztBQUNGO0FBTzNDLE1BQU1NLDhCQUFnQk4sb0RBQWFBLENBQWdDTztBQUU1RCxTQUFTQyxlQUFlLEVBQUVDLFFBQVEsRUFBMkI7SUFDbEUsTUFBTSxDQUFDQyxRQUFRQyxVQUFVLEdBQUdSLCtDQUFRQSxDQUFnQjtJQUNwRCxNQUFNLENBQUNTLGFBQWFDLGVBQWUsR0FBR1YsK0NBQVFBLENBQVcsRUFBRTtJQUMzRCxNQUFNLEVBQUVXLE9BQU8sRUFBRUMsV0FBVyxFQUFFQyxlQUFlLEVBQUUsR0FBR1gseURBQVNBO0lBRTNESCxnREFBU0EsQ0FBQztRQUNSLElBQUlhLGVBQWVDLG1CQUFtQkYsU0FBUztZQUM3Q0csUUFBUUMsR0FBRyxDQUFDLCtCQUErQko7WUFFM0MsTUFBTUssWUFBWWYsb0RBQUVBLENBQUMseUJBQXlCO2dCQUM1Q2dCLE9BQU87b0JBQUVDLFFBQVFQO2dCQUFRO1lBQzNCO1lBRUFLLFVBQVVHLEVBQUUsQ0FBQyxXQUFXO2dCQUN0QkwsUUFBUUMsR0FBRyxDQUFDLHFCQUFxQkMsVUFBVUksRUFBRTtnQkFDN0MsbUNBQW1DO2dCQUNuQ0osVUFBVUssSUFBSSxDQUFDLFFBQVFWO2dCQUN2QkcsUUFBUUMsR0FBRyxDQUFDLGdDQUFnQ0o7WUFDOUM7WUFFQUssVUFBVUcsRUFBRSxDQUFDLGtCQUFrQixDQUFDRztnQkFDOUJSLFFBQVFDLEdBQUcsQ0FBQyx5QkFBeUJPO2dCQUNyQ1osZUFBZVk7WUFDakI7WUFFQU4sVUFBVUcsRUFBRSxDQUFDLGNBQWM7Z0JBQ3pCTCxRQUFRQyxHQUFHLENBQUM7WUFDZDtZQUVBUCxVQUFVUTtZQUVWLE9BQU87Z0JBQ0xGLFFBQVFDLEdBQUcsQ0FBQztnQkFDWkMsVUFBVU8sS0FBSztZQUNqQjtRQUNGLE9BQU87WUFDTCxvQ0FBb0M7WUFDcEMsSUFBSWhCLFFBQVE7Z0JBQ1ZBLE9BQU9nQixLQUFLO2dCQUNaZixVQUFVO1lBQ1o7UUFDRjtJQUNGLEdBQUc7UUFBQ0k7UUFBYUM7UUFBaUJGO0tBQVE7SUFFMUMscUJBQ0UsOERBQUNSLGNBQWNxQixRQUFRO1FBQUNDLE9BQU87WUFBRWxCO1lBQVFFO1FBQVk7a0JBQ2xESDs7Ozs7O0FBR1A7QUFFTyxTQUFTb0I7SUFDZCxNQUFNQyxVQUFVN0IsaURBQVVBLENBQUNLO0lBQzNCLElBQUl3QixZQUFZdkIsV0FBVztRQUN6QixNQUFNLElBQUl3QixNQUFNO0lBQ2xCO0lBQ0EsT0FBT0Q7QUFDVCIsInNvdXJjZXMiOlsid2VicGFjazovL3doYXRzYXBwLW1ldGFtYXNrLWNsb25lLy4vY29udGV4dC9Tb2NrZXRDb250ZXh0LnRzeD8wNDY5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUNvbnRleHQsIHVzZUNvbnRleHQsIHVzZUVmZmVjdCwgdXNlU3RhdGUsIFJlYWN0Tm9kZSB9IGZyb20gJ3JlYWN0J1xyXG5pbXBvcnQgeyBpbywgU29ja2V0IH0gZnJvbSAnc29ja2V0LmlvLWNsaWVudCdcclxuaW1wb3J0IHsgdXNlV2FsbGV0IH0gZnJvbSAnLi9XYWxsZXRDb250ZXh0J1xyXG5cclxuaW50ZXJmYWNlIFNvY2tldENvbnRleHRUeXBlIHtcclxuICBzb2NrZXQ6IFNvY2tldCB8IG51bGxcclxuICBvbmxpbmVVc2Vyczogc3RyaW5nW11cclxufVxyXG5cclxuY29uc3QgU29ja2V0Q29udGV4dCA9IGNyZWF0ZUNvbnRleHQ8U29ja2V0Q29udGV4dFR5cGUgfCB1bmRlZmluZWQ+KHVuZGVmaW5lZClcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBTb2NrZXRQcm92aWRlcih7IGNoaWxkcmVuIH06IHsgY2hpbGRyZW46IFJlYWN0Tm9kZSB9KSB7XHJcbiAgY29uc3QgW3NvY2tldCwgc2V0U29ja2V0XSA9IHVzZVN0YXRlPFNvY2tldCB8IG51bGw+KG51bGwpXHJcbiAgY29uc3QgW29ubGluZVVzZXJzLCBzZXRPbmxpbmVVc2Vyc10gPSB1c2VTdGF0ZTxzdHJpbmdbXT4oW10pXHJcbiAgY29uc3QgeyBhY2NvdW50LCBpc0Nvbm5lY3RlZCwgaXNBdXRoZW50aWNhdGVkIH0gPSB1c2VXYWxsZXQoKVxyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKGlzQ29ubmVjdGVkICYmIGlzQXV0aGVudGljYXRlZCAmJiBhY2NvdW50KSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdDb25uZWN0aW5nIHNvY2tldCBmb3IgdXNlcjonLCBhY2NvdW50KVxyXG4gICAgICBcclxuICAgICAgY29uc3QgbmV3U29ja2V0ID0gaW8oJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMScsIHtcclxuICAgICAgICBxdWVyeTogeyB1c2VySWQ6IGFjY291bnQgfVxyXG4gICAgICB9KVxyXG5cclxuICAgICAgbmV3U29ja2V0Lm9uKCdjb25uZWN0JywgKCkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdTb2NrZXQgY29ubmVjdGVkOicsIG5ld1NvY2tldC5pZClcclxuICAgICAgICAvLyBKb2luIHdpdGggdXNlciBJRCB3aGVuIGNvbm5lY3RlZFxyXG4gICAgICAgIG5ld1NvY2tldC5lbWl0KCdqb2luJywgYWNjb3VudClcclxuICAgICAgICBjb25zb2xlLmxvZygnRW1pdHRlZCBqb2luIGV2ZW50IGZvciB1c2VyOicsIGFjY291bnQpXHJcbiAgICAgIH0pXHJcblxyXG4gICAgICBuZXdTb2NrZXQub24oJ2dldE9ubGluZVVzZXJzJywgKHVzZXJzOiBzdHJpbmdbXSkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdPbmxpbmUgdXNlcnMgdXBkYXRlZDonLCB1c2VycylcclxuICAgICAgICBzZXRPbmxpbmVVc2Vycyh1c2VycylcclxuICAgICAgfSlcclxuXHJcbiAgICAgIG5ld1NvY2tldC5vbignZGlzY29ubmVjdCcsICgpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZygnU29ja2V0IGRpc2Nvbm5lY3RlZCcpXHJcbiAgICAgIH0pXHJcblxyXG4gICAgICBzZXRTb2NrZXQobmV3U29ja2V0KVxyXG5cclxuICAgICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZygnQ2xvc2luZyBzb2NrZXQgY29ubmVjdGlvbicpXHJcbiAgICAgICAgbmV3U29ja2V0LmNsb3NlKClcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gQ2xlYXIgc29ja2V0IGlmIG5vdCBhdXRoZW50aWNhdGVkXHJcbiAgICAgIGlmIChzb2NrZXQpIHtcclxuICAgICAgICBzb2NrZXQuY2xvc2UoKVxyXG4gICAgICAgIHNldFNvY2tldChudWxsKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSwgW2lzQ29ubmVjdGVkLCBpc0F1dGhlbnRpY2F0ZWQsIGFjY291bnRdKVxyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPFNvY2tldENvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3sgc29ja2V0LCBvbmxpbmVVc2VycyB9fT5cclxuICAgICAge2NoaWxkcmVufVxyXG4gICAgPC9Tb2NrZXRDb250ZXh0LlByb3ZpZGVyPlxyXG4gIClcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHVzZVNvY2tldCgpIHtcclxuICBjb25zdCBjb250ZXh0ID0gdXNlQ29udGV4dChTb2NrZXRDb250ZXh0KVxyXG4gIGlmIChjb250ZXh0ID09PSB1bmRlZmluZWQpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcigndXNlU29ja2V0IG11c3QgYmUgdXNlZCB3aXRoaW4gYSBTb2NrZXRQcm92aWRlcicpXHJcbiAgfVxyXG4gIHJldHVybiBjb250ZXh0XHJcbn0iXSwibmFtZXMiOlsiY3JlYXRlQ29udGV4dCIsInVzZUNvbnRleHQiLCJ1c2VFZmZlY3QiLCJ1c2VTdGF0ZSIsImlvIiwidXNlV2FsbGV0IiwiU29ja2V0Q29udGV4dCIsInVuZGVmaW5lZCIsIlNvY2tldFByb3ZpZGVyIiwiY2hpbGRyZW4iLCJzb2NrZXQiLCJzZXRTb2NrZXQiLCJvbmxpbmVVc2VycyIsInNldE9ubGluZVVzZXJzIiwiYWNjb3VudCIsImlzQ29ubmVjdGVkIiwiaXNBdXRoZW50aWNhdGVkIiwiY29uc29sZSIsImxvZyIsIm5ld1NvY2tldCIsInF1ZXJ5IiwidXNlcklkIiwib24iLCJpZCIsImVtaXQiLCJ1c2VycyIsImNsb3NlIiwiUHJvdmlkZXIiLCJ2YWx1ZSIsInVzZVNvY2tldCIsImNvbnRleHQiLCJFcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./context/SocketContext.tsx\n");

/***/ }),

/***/ "./context/WalletContext.tsx":
/*!***********************************!*\
  !*** ./context/WalletContext.tsx ***!
  \***********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WalletProvider: () => (/* binding */ WalletProvider),\n/* harmony export */   useWallet: () => (/* binding */ useWallet)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var ethers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ethers */ \"ethers\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([ethers__WEBPACK_IMPORTED_MODULE_2__]);\nethers__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\nconst WalletContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(undefined);\nfunction WalletProvider({ children }) {\n    const [account, setAccount] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isConnected, setIsConnected] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isAuthenticated, setIsAuthenticated] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        checkConnection();\n    }, []);\n    const checkConnection = async ()=>{\n        if (false) {}\n    };\n    const connectWallet = async ()=>{\n        if (false) {} else {\n            alert(\"Please install MetaMask!\");\n        }\n    };\n    const authenticateUser = async (account)=>{\n        try {\n            const message = `Welcome to WhatsApp Clone!\\n\\nSign this message to authenticate your wallet.\\n\\nWallet: ${account}\\nTimestamp: ${Date.now()}`;\n            const signature = await signMessage(message);\n            // Store authentication in localStorage\n            localStorage.setItem(\"wallet_auth\", JSON.stringify({\n                account,\n                signature,\n                timestamp: Date.now()\n            }));\n            setIsAuthenticated(true);\n        } catch (error) {\n            console.error(\"Authentication failed:\", error);\n            setAccount(null);\n            setIsConnected(false);\n        }\n    };\n    const signMessage = async (message)=>{\n        if (!window.ethereum) throw new Error(\"MetaMask not found\");\n        const provider = new ethers__WEBPACK_IMPORTED_MODULE_2__.ethers.BrowserProvider(window.ethereum);\n        const signer = await provider.getSigner();\n        return await signer.signMessage(message);\n    };\n    const disconnectWallet = ()=>{\n        setAccount(null);\n        setIsConnected(false);\n        setIsAuthenticated(false);\n        localStorage.removeItem(\"wallet_auth\");\n        localStorage.removeItem(\"chat_messages\");\n        localStorage.removeItem(\"contacts\");\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(WalletContext.Provider, {\n        value: {\n            account,\n            isConnected,\n            isAuthenticated,\n            connectWallet,\n            disconnectWallet,\n            signMessage\n        },\n        children: children\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\Sour\\\\Documents\\\\GitHub\\\\Blockrtc\\\\context\\\\WalletContext.tsx\",\n        lineNumber: 110,\n        columnNumber: 9\n    }, this);\n}\nfunction useWallet() {\n    const context = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(WalletContext);\n    if (context === undefined) {\n        throw new Error(\"useWallet must be used within a WalletProvider\");\n    }\n    return context;\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jb250ZXh0L1dhbGxldENvbnRleHQudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQWlGO0FBQ2xEO0FBVy9CLE1BQU1LLDhCQUFnQkwsb0RBQWFBLENBQWdDTTtBQUU1RCxTQUFTQyxlQUFlLEVBQUVDLFFBQVEsRUFBMkI7SUFDaEUsTUFBTSxDQUFDQyxTQUFTQyxXQUFXLEdBQUdSLCtDQUFRQSxDQUFnQjtJQUN0RCxNQUFNLENBQUNTLGFBQWFDLGVBQWUsR0FBR1YsK0NBQVFBLENBQUM7SUFDL0MsTUFBTSxDQUFDVyxpQkFBaUJDLG1CQUFtQixHQUFHWiwrQ0FBUUEsQ0FBQztJQUV2REMsZ0RBQVNBLENBQUM7UUFDTlk7SUFDSixHQUFHLEVBQUU7SUFFTCxNQUFNQSxrQkFBa0I7UUFDcEIsSUFBSSxLQUFnRCxFQUFFLEVBMEJyRDtJQUNMO0lBRUEsTUFBTWdCLGdCQUFnQjtRQUNsQixJQUFJLEtBQWdELEVBQUUsRUFZckQsTUFBTTtZQUNIQyxNQUFNO1FBQ1Y7SUFDSjtJQUVBLE1BQU1KLG1CQUFtQixPQUFPbkI7UUFDNUIsSUFBSTtZQUNBLE1BQU13QixVQUFVLENBQUMsd0ZBQXdGLEVBQUV4QixRQUFRLGFBQWEsRUFBRXlCLEtBQUtDLEdBQUcsR0FBRyxDQUFDO1lBQzlJLE1BQU1DLFlBQVksTUFBTUMsWUFBWUo7WUFFcEMsdUNBQXVDO1lBQ3ZDVixhQUFhZSxPQUFPLENBQUMsZUFBZVosS0FBS2EsU0FBUyxDQUFDO2dCQUMvQzlCO2dCQUNBMkI7Z0JBQ0FJLFdBQVdOLEtBQUtDLEdBQUc7WUFDdkI7WUFFQXJCLG1CQUFtQjtRQUN2QixFQUFFLE9BQU9lLE9BQU87WUFDWkMsUUFBUUQsS0FBSyxDQUFDLDBCQUEwQkE7WUFDeENuQixXQUFXO1lBQ1hFLGVBQWU7UUFDbkI7SUFDSjtJQUVBLE1BQU15QixjQUFjLE9BQU9KO1FBQ3ZCLElBQUksQ0FBQ2pCLE9BQU9DLFFBQVEsRUFBRSxNQUFNLElBQUl3QixNQUFNO1FBRXRDLE1BQU1DLFdBQVcsSUFBSXRDLDBDQUFNQSxDQUFDdUMsZUFBZSxDQUFDM0IsT0FBT0MsUUFBUTtRQUMzRCxNQUFNMkIsU0FBUyxNQUFNRixTQUFTRyxTQUFTO1FBQ3ZDLE9BQU8sTUFBTUQsT0FBT1AsV0FBVyxDQUFDSjtJQUNwQztJQUVBLE1BQU1hLG1CQUFtQjtRQUNyQnBDLFdBQVc7UUFDWEUsZUFBZTtRQUNmRSxtQkFBbUI7UUFDbkJTLGFBQWF3QixVQUFVLENBQUM7UUFDeEJ4QixhQUFhd0IsVUFBVSxDQUFDO1FBQ3hCeEIsYUFBYXdCLFVBQVUsQ0FBQztJQUM1QjtJQUVBLHFCQUNJLDhEQUFDMUMsY0FBYzJDLFFBQVE7UUFBQ0MsT0FBTztZQUFFeEM7WUFBU0U7WUFBYUU7WUFBaUJrQjtZQUFlZTtZQUFrQlQ7UUFBWTtrQkFDaEg3Qjs7Ozs7O0FBR2I7QUFFTyxTQUFTMEM7SUFDWixNQUFNQyxVQUFVbEQsaURBQVVBLENBQUNJO0lBQzNCLElBQUk4QyxZQUFZN0MsV0FBVztRQUN2QixNQUFNLElBQUltQyxNQUFNO0lBQ3BCO0lBQ0EsT0FBT1U7QUFDWCIsInNvdXJjZXMiOlsid2VicGFjazovL3doYXRzYXBwLW1ldGFtYXNrLWNsb25lLy4vY29udGV4dC9XYWxsZXRDb250ZXh0LnRzeD83OGZlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUNvbnRleHQsIHVzZUNvbnRleHQsIHVzZVN0YXRlLCB1c2VFZmZlY3QsIFJlYWN0Tm9kZSB9IGZyb20gJ3JlYWN0J1xyXG5pbXBvcnQgeyBldGhlcnMgfSBmcm9tICdldGhlcnMnXHJcblxyXG5pbnRlcmZhY2UgV2FsbGV0Q29udGV4dFR5cGUge1xyXG4gICAgYWNjb3VudDogc3RyaW5nIHwgbnVsbFxyXG4gICAgaXNDb25uZWN0ZWQ6IGJvb2xlYW5cclxuICAgIGlzQXV0aGVudGljYXRlZDogYm9vbGVhblxyXG4gICAgY29ubmVjdFdhbGxldDogKCkgPT4gUHJvbWlzZTx2b2lkPlxyXG4gICAgZGlzY29ubmVjdFdhbGxldDogKCkgPT4gdm9pZFxyXG4gICAgc2lnbk1lc3NhZ2U6IChtZXNzYWdlOiBzdHJpbmcpID0+IFByb21pc2U8c3RyaW5nPlxyXG59XHJcblxyXG5jb25zdCBXYWxsZXRDb250ZXh0ID0gY3JlYXRlQ29udGV4dDxXYWxsZXRDb250ZXh0VHlwZSB8IHVuZGVmaW5lZD4odW5kZWZpbmVkKVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIFdhbGxldFByb3ZpZGVyKHsgY2hpbGRyZW4gfTogeyBjaGlsZHJlbjogUmVhY3ROb2RlIH0pIHtcclxuICAgIGNvbnN0IFthY2NvdW50LCBzZXRBY2NvdW50XSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpXHJcbiAgICBjb25zdCBbaXNDb25uZWN0ZWQsIHNldElzQ29ubmVjdGVkXSA9IHVzZVN0YXRlKGZhbHNlKVxyXG4gICAgY29uc3QgW2lzQXV0aGVudGljYXRlZCwgc2V0SXNBdXRoZW50aWNhdGVkXSA9IHVzZVN0YXRlKGZhbHNlKVxyXG5cclxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAgICAgY2hlY2tDb25uZWN0aW9uKClcclxuICAgIH0sIFtdKVxyXG5cclxuICAgIGNvbnN0IGNoZWNrQ29ubmVjdGlvbiA9IGFzeW5jICgpID0+IHtcclxuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmV0aGVyZXVtKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IHdpbmRvdy5ldGhlcmV1bS5yZXF1ZXN0KHsgbWV0aG9kOiAnZXRoX2FjY291bnRzJyB9KVxyXG4gICAgICAgICAgICAgICAgaWYgKGFjY291bnRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhY2NvdW50ID0gYWNjb3VudHNbMF1cclxuICAgICAgICAgICAgICAgICAgICBzZXRBY2NvdW50KGFjY291bnQpXHJcbiAgICAgICAgICAgICAgICAgICAgc2V0SXNDb25uZWN0ZWQodHJ1ZSlcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdXNlciB3YXMgcHJldmlvdXNseSBhdXRoZW50aWNhdGVkXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RvcmVkQXV0aCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd3YWxsZXRfYXV0aCcpXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0b3JlZEF1dGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXV0aERhdGEgPSBKU09OLnBhcnNlKHN0b3JlZEF1dGgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhdXRoRGF0YS5hY2NvdW50ID09PSBhY2NvdW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRJc0F1dGhlbnRpY2F0ZWQodHJ1ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERpZmZlcmVudCBhY2NvdW50LCBuZWVkIHRvIHJlLWF1dGhlbnRpY2F0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXV0aGVudGljYXRlVXNlcihhY2NvdW50KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gcHJldmlvdXMgYXV0aCwgbmVlZCB0byBhdXRoZW50aWNhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXV0aGVudGljYXRlVXNlcihhY2NvdW50KVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNoZWNraW5nIGNvbm5lY3Rpb246JywgZXJyb3IpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgY29ubmVjdFdhbGxldCA9IGFzeW5jICgpID0+IHtcclxuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmV0aGVyZXVtKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IHdpbmRvdy5ldGhlcmV1bS5yZXF1ZXN0KHsgbWV0aG9kOiAnZXRoX3JlcXVlc3RBY2NvdW50cycgfSlcclxuICAgICAgICAgICAgICAgIGNvbnN0IGFjY291bnQgPSBhY2NvdW50c1swXVxyXG4gICAgICAgICAgICAgICAgc2V0QWNjb3VudChhY2NvdW50KVxyXG4gICAgICAgICAgICAgICAgc2V0SXNDb25uZWN0ZWQodHJ1ZSlcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBBdXRoZW50aWNhdGUgd2l0aCBzaWduYXR1cmVcclxuICAgICAgICAgICAgICAgIGF3YWl0IGF1dGhlbnRpY2F0ZVVzZXIoYWNjb3VudClcclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNvbm5lY3Rpbmcgd2FsbGV0OicsIGVycm9yKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgYWxlcnQoJ1BsZWFzZSBpbnN0YWxsIE1ldGFNYXNrIScpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGF1dGhlbnRpY2F0ZVVzZXIgPSBhc3luYyAoYWNjb3VudDogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGBXZWxjb21lIHRvIFdoYXRzQXBwIENsb25lIVxcblxcblNpZ24gdGhpcyBtZXNzYWdlIHRvIGF1dGhlbnRpY2F0ZSB5b3VyIHdhbGxldC5cXG5cXG5XYWxsZXQ6ICR7YWNjb3VudH1cXG5UaW1lc3RhbXA6ICR7RGF0ZS5ub3coKX1gXHJcbiAgICAgICAgICAgIGNvbnN0IHNpZ25hdHVyZSA9IGF3YWl0IHNpZ25NZXNzYWdlKG1lc3NhZ2UpXHJcblxyXG4gICAgICAgICAgICAvLyBTdG9yZSBhdXRoZW50aWNhdGlvbiBpbiBsb2NhbFN0b3JhZ2VcclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3dhbGxldF9hdXRoJywgSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICAgICAgYWNjb3VudCxcclxuICAgICAgICAgICAgICAgIHNpZ25hdHVyZSxcclxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxyXG4gICAgICAgICAgICB9KSlcclxuXHJcbiAgICAgICAgICAgIHNldElzQXV0aGVudGljYXRlZCh0cnVlKVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0F1dGhlbnRpY2F0aW9uIGZhaWxlZDonLCBlcnJvcilcclxuICAgICAgICAgICAgc2V0QWNjb3VudChudWxsKVxyXG4gICAgICAgICAgICBzZXRJc0Nvbm5lY3RlZChmYWxzZSlcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc2lnbk1lc3NhZ2UgPSBhc3luYyAobWVzc2FnZTogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+ID0+IHtcclxuICAgICAgICBpZiAoIXdpbmRvdy5ldGhlcmV1bSkgdGhyb3cgbmV3IEVycm9yKCdNZXRhTWFzayBub3QgZm91bmQnKVxyXG5cclxuICAgICAgICBjb25zdCBwcm92aWRlciA9IG5ldyBldGhlcnMuQnJvd3NlclByb3ZpZGVyKHdpbmRvdy5ldGhlcmV1bSlcclxuICAgICAgICBjb25zdCBzaWduZXIgPSBhd2FpdCBwcm92aWRlci5nZXRTaWduZXIoKVxyXG4gICAgICAgIHJldHVybiBhd2FpdCBzaWduZXIuc2lnbk1lc3NhZ2UobWVzc2FnZSlcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBkaXNjb25uZWN0V2FsbGV0ID0gKCkgPT4ge1xyXG4gICAgICAgIHNldEFjY291bnQobnVsbClcclxuICAgICAgICBzZXRJc0Nvbm5lY3RlZChmYWxzZSlcclxuICAgICAgICBzZXRJc0F1dGhlbnRpY2F0ZWQoZmFsc2UpXHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3dhbGxldF9hdXRoJylcclxuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnY2hhdF9tZXNzYWdlcycpXHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2NvbnRhY3RzJylcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICAgIDxXYWxsZXRDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXt7IGFjY291bnQsIGlzQ29ubmVjdGVkLCBpc0F1dGhlbnRpY2F0ZWQsIGNvbm5lY3RXYWxsZXQsIGRpc2Nvbm5lY3RXYWxsZXQsIHNpZ25NZXNzYWdlIH19PlxyXG4gICAgICAgICAgICB7Y2hpbGRyZW59XHJcbiAgICAgICAgPC9XYWxsZXRDb250ZXh0LlByb3ZpZGVyPlxyXG4gICAgKVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdXNlV2FsbGV0KCkge1xyXG4gICAgY29uc3QgY29udGV4dCA9IHVzZUNvbnRleHQoV2FsbGV0Q29udGV4dClcclxuICAgIGlmIChjb250ZXh0ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3VzZVdhbGxldCBtdXN0IGJlIHVzZWQgd2l0aGluIGEgV2FsbGV0UHJvdmlkZXInKVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNvbnRleHRcclxufSJdLCJuYW1lcyI6WyJjcmVhdGVDb250ZXh0IiwidXNlQ29udGV4dCIsInVzZVN0YXRlIiwidXNlRWZmZWN0IiwiZXRoZXJzIiwiV2FsbGV0Q29udGV4dCIsInVuZGVmaW5lZCIsIldhbGxldFByb3ZpZGVyIiwiY2hpbGRyZW4iLCJhY2NvdW50Iiwic2V0QWNjb3VudCIsImlzQ29ubmVjdGVkIiwic2V0SXNDb25uZWN0ZWQiLCJpc0F1dGhlbnRpY2F0ZWQiLCJzZXRJc0F1dGhlbnRpY2F0ZWQiLCJjaGVja0Nvbm5lY3Rpb24iLCJ3aW5kb3ciLCJldGhlcmV1bSIsImFjY291bnRzIiwicmVxdWVzdCIsIm1ldGhvZCIsImxlbmd0aCIsInN0b3JlZEF1dGgiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiYXV0aERhdGEiLCJKU09OIiwicGFyc2UiLCJhdXRoZW50aWNhdGVVc2VyIiwiZXJyb3IiLCJjb25zb2xlIiwiY29ubmVjdFdhbGxldCIsImFsZXJ0IiwibWVzc2FnZSIsIkRhdGUiLCJub3ciLCJzaWduYXR1cmUiLCJzaWduTWVzc2FnZSIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJ0aW1lc3RhbXAiLCJFcnJvciIsInByb3ZpZGVyIiwiQnJvd3NlclByb3ZpZGVyIiwic2lnbmVyIiwiZ2V0U2lnbmVyIiwiZGlzY29ubmVjdFdhbGxldCIsInJlbW92ZUl0ZW0iLCJQcm92aWRlciIsInZhbHVlIiwidXNlV2FsbGV0IiwiY29udGV4dCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./context/WalletContext.tsx\n");

/***/ }),

/***/ "./pages/_app.tsx":
/*!************************!*\
  !*** ./pages/_app.tsx ***!
  \************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ App)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _styles_globals_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../styles/globals.css */ \"./styles/globals.css\");\n/* harmony import */ var _styles_globals_css__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_styles_globals_css__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _context_WalletContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../context/WalletContext */ \"./context/WalletContext.tsx\");\n/* harmony import */ var _context_SocketContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../context/SocketContext */ \"./context/SocketContext.tsx\");\n/* harmony import */ var _context_P2PContext__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../context/P2PContext */ \"./context/P2PContext.tsx\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_context_WalletContext__WEBPACK_IMPORTED_MODULE_2__, _context_SocketContext__WEBPACK_IMPORTED_MODULE_3__, _context_P2PContext__WEBPACK_IMPORTED_MODULE_4__]);\n([_context_WalletContext__WEBPACK_IMPORTED_MODULE_2__, _context_SocketContext__WEBPACK_IMPORTED_MODULE_3__, _context_P2PContext__WEBPACK_IMPORTED_MODULE_4__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\nfunction App({ Component, pageProps }) {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_context_WalletContext__WEBPACK_IMPORTED_MODULE_2__.WalletProvider, {\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_context_SocketContext__WEBPACK_IMPORTED_MODULE_3__.SocketProvider, {\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_context_P2PContext__WEBPACK_IMPORTED_MODULE_4__.P2PProvider, {\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(Component, {\n                    ...pageProps\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\Sour\\\\Documents\\\\GitHub\\\\Blockrtc\\\\pages\\\\_app.tsx\",\n                    lineNumber: 12,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\Sour\\\\Documents\\\\GitHub\\\\Blockrtc\\\\pages\\\\_app.tsx\",\n                lineNumber: 11,\n                columnNumber: 9\n            }, this)\n        }, void 0, false, {\n            fileName: \"C:\\\\Users\\\\Sour\\\\Documents\\\\GitHub\\\\Blockrtc\\\\pages\\\\_app.tsx\",\n            lineNumber: 10,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\Sour\\\\Documents\\\\GitHub\\\\Blockrtc\\\\pages\\\\_app.tsx\",\n        lineNumber: 9,\n        columnNumber: 5\n    }, this);\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWdlcy9fYXBwLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBOEI7QUFFMkI7QUFDQTtBQUNOO0FBRXBDLFNBQVNHLElBQUksRUFBRUMsU0FBUyxFQUFFQyxTQUFTLEVBQVk7SUFDNUQscUJBQ0UsOERBQUNMLGtFQUFjQTtrQkFDYiw0RUFBQ0Msa0VBQWNBO3NCQUNiLDRFQUFDQyw0REFBV0E7MEJBQ1YsNEVBQUNFO29CQUFXLEdBQUdDLFNBQVM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUtsQyIsInNvdXJjZXMiOlsid2VicGFjazovL3doYXRzYXBwLW1ldGFtYXNrLWNsb25lLy4vcGFnZXMvX2FwcC50c3g/MmZiZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgJy4uL3N0eWxlcy9nbG9iYWxzLmNzcydcclxuaW1wb3J0IHR5cGUgeyBBcHBQcm9wcyB9IGZyb20gJ25leHQvYXBwJ1xyXG5pbXBvcnQgeyBXYWxsZXRQcm92aWRlciB9IGZyb20gJy4uL2NvbnRleHQvV2FsbGV0Q29udGV4dCdcclxuaW1wb3J0IHsgU29ja2V0UHJvdmlkZXIgfSBmcm9tICcuLi9jb250ZXh0L1NvY2tldENvbnRleHQnXHJcbmltcG9ydCB7IFAyUFByb3ZpZGVyIH0gZnJvbSAnLi4vY29udGV4dC9QMlBDb250ZXh0J1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQXBwKHsgQ29tcG9uZW50LCBwYWdlUHJvcHMgfTogQXBwUHJvcHMpIHtcclxuICByZXR1cm4gKFxyXG4gICAgPFdhbGxldFByb3ZpZGVyPlxyXG4gICAgICA8U29ja2V0UHJvdmlkZXI+XHJcbiAgICAgICAgPFAyUFByb3ZpZGVyPlxyXG4gICAgICAgICAgPENvbXBvbmVudCB7Li4ucGFnZVByb3BzfSAvPlxyXG4gICAgICAgIDwvUDJQUHJvdmlkZXI+XHJcbiAgICAgIDwvU29ja2V0UHJvdmlkZXI+XHJcbiAgICA8L1dhbGxldFByb3ZpZGVyPlxyXG4gIClcclxufSJdLCJuYW1lcyI6WyJXYWxsZXRQcm92aWRlciIsIlNvY2tldFByb3ZpZGVyIiwiUDJQUHJvdmlkZXIiLCJBcHAiLCJDb21wb25lbnQiLCJwYWdlUHJvcHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./pages/_app.tsx\n");

/***/ }),

/***/ "./utils/encryption.ts":
/*!*****************************!*\
  !*** ./utils/encryption.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EncryptionManager: () => (/* binding */ EncryptionManager),\n/* harmony export */   SecureStorage: () => (/* binding */ SecureStorage)\n/* harmony export */ });\n// Client-side encryption utilities\nclass EncryptionManager {\n    static getInstance() {\n        if (!EncryptionManager.instance) {\n            EncryptionManager.instance = new EncryptionManager();\n        }\n        return EncryptionManager.instance;\n    }\n    // Initialize encryption key from wallet signature\n    async initializeKey(walletAddress, signature) {\n        const keyMaterial = await crypto.subtle.importKey(\"raw\", new TextEncoder().encode(signature.slice(0, 32)), {\n            name: \"PBKDF2\"\n        }, false, [\n            \"deriveBits\",\n            \"deriveKey\"\n        ]);\n        this.cryptoKey = await crypto.subtle.deriveKey({\n            name: \"PBKDF2\",\n            salt: new TextEncoder().encode(walletAddress),\n            iterations: 100000,\n            hash: \"SHA-256\"\n        }, keyMaterial, {\n            name: \"AES-GCM\",\n            length: 256\n        }, false, [\n            \"encrypt\",\n            \"decrypt\"\n        ]);\n    }\n    // Encrypt data\n    async encrypt(data) {\n        if (!this.cryptoKey) throw new Error(\"Encryption key not initialized\");\n        const iv = crypto.getRandomValues(new Uint8Array(12));\n        const encodedData = new TextEncoder().encode(data);\n        const encryptedData = await crypto.subtle.encrypt({\n            name: \"AES-GCM\",\n            iv\n        }, this.cryptoKey, encodedData);\n        // Combine IV and encrypted data\n        const combined = new Uint8Array(iv.length + encryptedData.byteLength);\n        combined.set(iv);\n        combined.set(new Uint8Array(encryptedData), iv.length);\n        let binaryString = \"\";\n        for(let i = 0; i < combined.length; i++){\n            binaryString += String.fromCharCode(combined[i]);\n        }\n        return btoa(binaryString);\n    }\n    // Decrypt data\n    async decrypt(encryptedData) {\n        if (!this.cryptoKey) throw new Error(\"Encryption key not initialized\");\n        const binaryString = atob(encryptedData);\n        const combined = new Uint8Array(binaryString.length);\n        for(let i = 0; i < binaryString.length; i++){\n            combined[i] = binaryString.charCodeAt(i);\n        }\n        const iv = combined.slice(0, 12);\n        const data = combined.slice(12);\n        const decryptedData = await crypto.subtle.decrypt({\n            name: \"AES-GCM\",\n            iv\n        }, this.cryptoKey, data);\n        return new TextDecoder().decode(decryptedData);\n    }\n    constructor(){\n        this.cryptoKey = null;\n    }\n}\n// Local storage with encryption\nclass SecureStorage {\n    async setItem(key, value) {\n        const serialized = JSON.stringify(value);\n        const encrypted = await this.encryption.encrypt(serialized);\n        localStorage.setItem(key, encrypted);\n    }\n    async getItem(key) {\n        const encrypted = localStorage.getItem(key);\n        if (!encrypted) return null;\n        try {\n            const decrypted = await this.encryption.decrypt(encrypted);\n            return JSON.parse(decrypted);\n        } catch (error) {\n            console.error(\"Failed to decrypt data:\", error);\n            return null;\n        }\n    }\n    removeItem(key) {\n        localStorage.removeItem(key);\n    }\n    async clear() {\n        localStorage.clear();\n    }\n    constructor(){\n        this.encryption = EncryptionManager.getInstance();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE1BQU1JLFlBQVksTUFBTSxJQUFJLENBQUNDLFVBQVUsQ0FBQzlCLE9BQU8sQ0FBQzBCO1FBQ2hESyxhQUFhUixPQUFPLENBQUNDLEtBQUtLO0lBQzVCO0lBRUEsTUFBTUcsUUFBV1IsR0FBVyxFQUFxQjtRQUMvQyxNQUFNSyxZQUFZRSxhQUFhQyxPQUFPLENBQUNSO1FBQ3ZDLElBQUksQ0FBQ0ssV0FBVyxPQUFPO1FBRXZCLElBQUk7WUFDRixNQUFNSSxZQUFZLE1BQU0sSUFBSSxDQUFDSCxVQUFVLENBQUNkLE9BQU8sQ0FBQ2E7WUFDaEQsT0FBT0YsS0FBS08sS0FBSyxDQUFDRDtRQUNwQixFQUFFLE9BQU9FLE9BQU87WUFDZEMsUUFBUUQsS0FBSyxDQUFDLDJCQUEyQkE7WUFDekMsT0FBTztRQUNUO0lBQ0Y7SUFFQUUsV0FBV2IsR0FBVyxFQUFRO1FBQzVCTyxhQUFhTSxVQUFVLENBQUNiO0lBQzFCO0lBRUEsTUFBTWMsUUFBdUI7UUFDM0JQLGFBQWFPLEtBQUs7SUFDcEI7O2FBM0JRUixhQUFhbEQsa0JBQWtCQyxXQUFXOztBQTRCcEQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93aGF0c2FwcC1tZXRhbWFzay1jbG9uZS8uL3V0aWxzL2VuY3J5cHRpb24udHM/YWQyMSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDbGllbnQtc2lkZSBlbmNyeXB0aW9uIHV0aWxpdGllc1xyXG5leHBvcnQgY2xhc3MgRW5jcnlwdGlvbk1hbmFnZXIge1xyXG4gIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBFbmNyeXB0aW9uTWFuYWdlcjtcclxuICBwcml2YXRlIGNyeXB0b0tleTogQ3J5cHRvS2V5IHwgbnVsbCA9IG51bGw7XHJcblxyXG4gIHN0YXRpYyBnZXRJbnN0YW5jZSgpOiBFbmNyeXB0aW9uTWFuYWdlciB7XHJcbiAgICBpZiAoIUVuY3J5cHRpb25NYW5hZ2VyLmluc3RhbmNlKSB7XHJcbiAgICAgIEVuY3J5cHRpb25NYW5hZ2VyLmluc3RhbmNlID0gbmV3IEVuY3J5cHRpb25NYW5hZ2VyKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gRW5jcnlwdGlvbk1hbmFnZXIuaW5zdGFuY2U7XHJcbiAgfVxyXG5cclxuICAvLyBJbml0aWFsaXplIGVuY3J5cHRpb24ga2V5IGZyb20gd2FsbGV0IHNpZ25hdHVyZVxyXG4gIGFzeW5jIGluaXRpYWxpemVLZXkod2FsbGV0QWRkcmVzczogc3RyaW5nLCBzaWduYXR1cmU6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgY29uc3Qga2V5TWF0ZXJpYWwgPSBhd2FpdCBjcnlwdG8uc3VidGxlLmltcG9ydEtleShcclxuICAgICAgJ3JhdycsXHJcbiAgICAgIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzaWduYXR1cmUuc2xpY2UoMCwgMzIpKSxcclxuICAgICAgeyBuYW1lOiAnUEJLREYyJyB9LFxyXG4gICAgICBmYWxzZSxcclxuICAgICAgWydkZXJpdmVCaXRzJywgJ2Rlcml2ZUtleSddXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuY3J5cHRvS2V5ID0gYXdhaXQgY3J5cHRvLnN1YnRsZS5kZXJpdmVLZXkoXHJcbiAgICAgIHtcclxuICAgICAgICBuYW1lOiAnUEJLREYyJyxcclxuICAgICAgICBzYWx0OiBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUod2FsbGV0QWRkcmVzcyksXHJcbiAgICAgICAgaXRlcmF0aW9uczogMTAwMDAwLFxyXG4gICAgICAgIGhhc2g6ICdTSEEtMjU2J1xyXG4gICAgICB9LFxyXG4gICAgICBrZXlNYXRlcmlhbCxcclxuICAgICAgeyBuYW1lOiAnQUVTLUdDTScsIGxlbmd0aDogMjU2IH0sXHJcbiAgICAgIGZhbHNlLFxyXG4gICAgICBbJ2VuY3J5cHQnLCAnZGVjcnlwdCddXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLy8gRW5jcnlwdCBkYXRhXHJcbiAgYXN5bmMgZW5jcnlwdChkYXRhOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgaWYgKCF0aGlzLmNyeXB0b0tleSkgdGhyb3cgbmV3IEVycm9yKCdFbmNyeXB0aW9uIGtleSBub3QgaW5pdGlhbGl6ZWQnKTtcclxuXHJcbiAgICBjb25zdCBpdiA9IGNyeXB0by5nZXRSYW5kb21WYWx1ZXMobmV3IFVpbnQ4QXJyYXkoMTIpKTtcclxuICAgIGNvbnN0IGVuY29kZWREYXRhID0gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKGRhdGEpO1xyXG5cclxuICAgIGNvbnN0IGVuY3J5cHRlZERhdGEgPSBhd2FpdCBjcnlwdG8uc3VidGxlLmVuY3J5cHQoXHJcbiAgICAgIHsgbmFtZTogJ0FFUy1HQ00nLCBpdiB9LFxyXG4gICAgICB0aGlzLmNyeXB0b0tleSxcclxuICAgICAgZW5jb2RlZERhdGFcclxuICAgICk7XHJcblxyXG4gICAgLy8gQ29tYmluZSBJViBhbmQgZW5jcnlwdGVkIGRhdGFcclxuICAgIGNvbnN0IGNvbWJpbmVkID0gbmV3IFVpbnQ4QXJyYXkoaXYubGVuZ3RoICsgZW5jcnlwdGVkRGF0YS5ieXRlTGVuZ3RoKTtcclxuICAgIGNvbWJpbmVkLnNldChpdik7XHJcbiAgICBjb21iaW5lZC5zZXQobmV3IFVpbnQ4QXJyYXkoZW5jcnlwdGVkRGF0YSksIGl2Lmxlbmd0aCk7XHJcblxyXG4gICAgbGV0IGJpbmFyeVN0cmluZyA9ICcnO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb21iaW5lZC5sZW5ndGg7IGkrKykge1xyXG4gICAgICBiaW5hcnlTdHJpbmcgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShjb21iaW5lZFtpXSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYnRvYShiaW5hcnlTdHJpbmcpO1xyXG4gIH1cclxuXHJcbiAgLy8gRGVjcnlwdCBkYXRhXHJcbiAgYXN5bmMgZGVjcnlwdChlbmNyeXB0ZWREYXRhOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgaWYgKCF0aGlzLmNyeXB0b0tleSkgdGhyb3cgbmV3IEVycm9yKCdFbmNyeXB0aW9uIGtleSBub3QgaW5pdGlhbGl6ZWQnKTtcclxuXHJcbiAgICBjb25zdCBiaW5hcnlTdHJpbmcgPSBhdG9iKGVuY3J5cHRlZERhdGEpO1xyXG4gICAgY29uc3QgY29tYmluZWQgPSBuZXcgVWludDhBcnJheShiaW5hcnlTdHJpbmcubGVuZ3RoKTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYmluYXJ5U3RyaW5nLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGNvbWJpbmVkW2ldID0gYmluYXJ5U3RyaW5nLmNoYXJDb2RlQXQoaSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgaXYgPSBjb21iaW5lZC5zbGljZSgwLCAxMik7XHJcbiAgICBjb25zdCBkYXRhID0gY29tYmluZWQuc2xpY2UoMTIpO1xyXG5cclxuICAgIGNvbnN0IGRlY3J5cHRlZERhdGEgPSBhd2FpdCBjcnlwdG8uc3VidGxlLmRlY3J5cHQoXHJcbiAgICAgIHsgbmFtZTogJ0FFUy1HQ00nLCBpdiB9LFxyXG4gICAgICB0aGlzLmNyeXB0b0tleSxcclxuICAgICAgZGF0YVxyXG4gICAgKTtcclxuXHJcbiAgICByZXR1cm4gbmV3IFRleHREZWNvZGVyKCkuZGVjb2RlKGRlY3J5cHRlZERhdGEpO1xyXG4gIH1cclxufVxyXG5cclxuLy8gTG9jYWwgc3RvcmFnZSB3aXRoIGVuY3J5cHRpb25cclxuZXhwb3J0IGNsYXNzIFNlY3VyZVN0b3JhZ2Uge1xyXG4gIHByaXZhdGUgZW5jcnlwdGlvbiA9IEVuY3J5cHRpb25NYW5hZ2VyLmdldEluc3RhbmNlKCk7XHJcblxyXG4gIGFzeW5jIHNldEl0ZW0oa2V5OiBzdHJpbmcsIHZhbHVlOiBhbnkpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGNvbnN0IHNlcmlhbGl6ZWQgPSBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XHJcbiAgICBjb25zdCBlbmNyeXB0ZWQgPSBhd2FpdCB0aGlzLmVuY3J5cHRpb24uZW5jcnlwdChzZXJpYWxpemVkKTtcclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgZW5jcnlwdGVkKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGdldEl0ZW08VD4oa2V5OiBzdHJpbmcpOiBQcm9taXNlPFQgfCBudWxsPiB7XHJcbiAgICBjb25zdCBlbmNyeXB0ZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xyXG4gICAgaWYgKCFlbmNyeXB0ZWQpIHJldHVybiBudWxsO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGRlY3J5cHRlZCA9IGF3YWl0IHRoaXMuZW5jcnlwdGlvbi5kZWNyeXB0KGVuY3J5cHRlZCk7XHJcbiAgICAgIHJldHVybiBKU09OLnBhcnNlKGRlY3J5cHRlZCk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZGVjcnlwdCBkYXRhOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZW1vdmVJdGVtKGtleTogc3RyaW5nKTogdm9pZCB7XHJcbiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgY2xlYXIoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKTtcclxuICB9XHJcbn0iXSwibmFtZXMiOlsiRW5jcnlwdGlvbk1hbmFnZXIiLCJnZXRJbnN0YW5jZSIsImluc3RhbmNlIiwiaW5pdGlhbGl6ZUtleSIsIndhbGxldEFkZHJlc3MiLCJzaWduYXR1cmUiLCJrZXlNYXRlcmlhbCIsImNyeXB0byIsInN1YnRsZSIsImltcG9ydEtleSIsIlRleHRFbmNvZGVyIiwiZW5jb2RlIiwic2xpY2UiLCJuYW1lIiwiY3J5cHRvS2V5IiwiZGVyaXZlS2V5Iiwic2FsdCIsIml0ZXJhdGlvbnMiLCJoYXNoIiwibGVuZ3RoIiwiZW5jcnlwdCIsImRhdGEiLCJFcnJvciIsIml2IiwiZ2V0UmFuZG9tVmFsdWVzIiwiVWludDhBcnJheSIsImVuY29kZWREYXRhIiwiZW5jcnlwdGVkRGF0YSIsImNvbWJpbmVkIiwiYnl0ZUxlbmd0aCIsInNldCIsImJpbmFyeVN0cmluZyIsImkiLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJidG9hIiwiZGVjcnlwdCIsImF0b2IiLCJjaGFyQ29kZUF0IiwiZGVjcnlwdGVkRGF0YSIsIlRleHREZWNvZGVyIiwiZGVjb2RlIiwiU2VjdXJlU3RvcmFnZSIsInNldEl0ZW0iLCJrZXkiLCJ2YWx1ZSIsInNlcmlhbGl6ZWQiLCJKU09OIiwic3RyaW5naWZ5IiwiZW5jcnlwdGVkIiwiZW5jcnlwdGlvbiIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJkZWNyeXB0ZWQiLCJwYXJzZSIsImVycm9yIiwiY29uc29sZSIsInJlbW92ZUl0ZW0iLCJjbGVhciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./utils/encryption.ts\n");

/***/ }),

/***/ "./utils/webrtc.ts":
/*!*************************!*\
  !*** ./utils/webrtc.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WebRTCManager: () => (/* binding */ WebRTCManager)\n/* harmony export */ });\n// WebRTC P2P Connection Manager\nclass WebRTCManager {\n    constructor(socket, localAddress){\n        this.peerConnection = null;\n        this.dataChannel = null;\n        this.localStream = null;\n        this.onMessageCallback = null;\n        this.onConnectionStateCallback = null;\n        this.socket = null;\n        this.localAddress = \"\";\n        this.remoteAddress = \"\";\n        this.isInitiator = false;\n        this.connectionState = \"new\";\n        this.pendingCandidates = [];\n        this.socket = socket;\n        this.localAddress = localAddress;\n        this.setupPeerConnection();\n    }\n    setupPeerConnection() {\n        // STUN servers for NAT traversal\n        const configuration = {\n            iceServers: [\n                {\n                    urls: \"stun:stun.l.google.com:19302\"\n                },\n                {\n                    urls: \"stun:stun1.l.google.com:19302\"\n                }\n            ]\n        };\n        this.peerConnection = new RTCPeerConnection(configuration);\n        // Handle ICE candidates\n        this.peerConnection.onicecandidate = (event)=>{\n            if (event.candidate && this.socket) {\n                this.socket.emit(\"ice-candidate\", {\n                    candidate: event.candidate,\n                    target: this.remoteAddress\n                });\n            }\n        };\n        // Handle connection state changes\n        this.peerConnection.onconnectionstatechange = ()=>{\n            const state = this.peerConnection?.connectionState || \"disconnected\";\n            console.log(\"P2P Connection state:\", state);\n            this.onConnectionStateCallback?.(state);\n        };\n        // Handle incoming data channel\n        this.peerConnection.ondatachannel = (event)=>{\n            const channel = event.channel;\n            this.setupDataChannel(channel);\n        };\n        // Handle remote stream\n        this.peerConnection.ontrack = (event)=>{\n            console.log(\"Received remote stream\");\n        // Handle remote audio/video stream\n        };\n    }\n    setupDataChannel(channel) {\n        this.dataChannel = channel;\n        channel.onopen = ()=>{\n            console.log(\"P2P Data channel opened\");\n            this.onConnectionStateCallback?.(\"connected\");\n        };\n        channel.onclose = ()=>{\n            console.log(\"P2P Data channel closed\");\n            this.onConnectionStateCallback?.(\"disconnected\");\n        };\n        channel.onmessage = (event)=>{\n            try {\n                const message = JSON.parse(event.data);\n                console.log(\"Received P2P message:\", message);\n                this.onMessageCallback?.(message);\n            } catch (error) {\n                console.error(\"Failed to parse P2P message:\", error);\n            }\n        };\n    }\n    // Initiate connection to remote peer\n    async initiateConnection(remoteAddress) {\n        try {\n            console.log(\"Initiating connection to:\", remoteAddress);\n            if (!this.peerConnection) {\n                console.error(\"No peer connection available\");\n                return;\n            }\n            // Check if we're already connected or connecting to this peer\n            if (this.remoteAddress === remoteAddress && (this.connectionState === \"connected\" || this.connectionState === \"connecting\")) {\n                console.log(\"Already connected/connecting to this peer\");\n                return;\n            }\n            this.remoteAddress = remoteAddress;\n            this.isInitiator = true;\n            // Create data channel\n            this.dataChannel = this.peerConnection.createDataChannel(\"messages\", {\n                ordered: true\n            });\n            this.setupDataChannel(this.dataChannel);\n            // Create offer\n            const offer = await this.peerConnection.createOffer();\n            await this.peerConnection.setLocalDescription(offer);\n            console.log(\"Local description (offer) set successfully\");\n            // Send offer through signaling server\n            this.socket.emit(\"webrtc-offer\", {\n                offer,\n                target: remoteAddress,\n                sender: this.localAddress\n            });\n            this.connectionState = \"connecting\";\n        } catch (error) {\n            console.error(\"Error initiating connection:\", error);\n            this.connectionState = \"failed\";\n            this.onConnectionStateCallback?.(\"failed\");\n        }\n    }\n    // Handle incoming offer\n    async handleOffer(offer, senderAddress) {\n        try {\n            console.log(\"Handling offer from:\", senderAddress, \"Current state:\", this.peerConnection?.signalingState);\n            if (!this.peerConnection) {\n                console.error(\"No peer connection available\");\n                return;\n            }\n            // Check if we're in the right state to handle an offer\n            if (this.peerConnection.signalingState !== \"stable\" && this.peerConnection.signalingState !== \"have-local-offer\") {\n                console.warn(\"Ignoring offer in state:\", this.peerConnection.signalingState);\n                return;\n            }\n            this.remoteAddress = senderAddress;\n            this.isInitiator = false;\n            await this.peerConnection.setRemoteDescription(offer);\n            console.log(\"Remote description set successfully\");\n            // Create answer\n            const answer = await this.peerConnection.createAnswer();\n            await this.peerConnection.setLocalDescription(answer);\n            console.log(\"Local description (answer) set successfully\");\n            // Process any pending ICE candidates\n            await this.processPendingCandidates();\n            // Send answer through signaling server\n            this.socket.emit(\"webrtc-answer\", {\n                answer,\n                target: senderAddress,\n                sender: this.localAddress\n            });\n            this.connectionState = \"connecting\";\n        } catch (error) {\n            console.error(\"Error handling offer:\", error);\n            this.connectionState = \"failed\";\n            this.onConnectionStateCallback?.(\"failed\");\n        }\n    }\n    // Handle incoming answer\n    async handleAnswer(answer) {\n        try {\n            console.log(\"Handling answer, Current state:\", this.peerConnection?.signalingState);\n            if (!this.peerConnection) {\n                console.error(\"No peer connection available\");\n                return;\n            }\n            // Check if we're in the right state to handle an answer\n            if (this.peerConnection.signalingState !== \"have-local-offer\") {\n                console.warn(\"Ignoring answer in state:\", this.peerConnection.signalingState);\n                return;\n            }\n            await this.peerConnection.setRemoteDescription(answer);\n            console.log(\"Remote description (answer) set successfully\");\n            // Process any pending ICE candidates\n            await this.processPendingCandidates();\n            this.connectionState = \"connecting\";\n        } catch (error) {\n            console.error(\"Error handling answer:\", error);\n            this.connectionState = \"failed\";\n            this.onConnectionStateCallback?.(\"failed\");\n        }\n    }\n    // Handle ICE candidate\n    async handleIceCandidate(candidate) {\n        try {\n            if (!this.peerConnection) {\n                console.error(\"No peer connection available for ICE candidate\");\n                return;\n            }\n            // If remote description is not set yet, queue the candidate\n            if (this.peerConnection.remoteDescription === null) {\n                console.log(\"Queueing ICE candidate until remote description is set\");\n                this.pendingCandidates.push(candidate);\n                return;\n            }\n            await this.peerConnection.addIceCandidate(candidate);\n            console.log(\"ICE candidate added successfully\");\n        } catch (error) {\n            console.error(\"Error handling ICE candidate:\", error);\n        }\n    }\n    // Process pending ICE candidates\n    async processPendingCandidates() {\n        console.log(\"Processing\", this.pendingCandidates.length, \"pending ICE candidates\");\n        for (const candidate of this.pendingCandidates){\n            try {\n                await this.peerConnection.addIceCandidate(candidate);\n                console.log(\"Pending ICE candidate added successfully\");\n            } catch (error) {\n                console.error(\"Error adding pending ICE candidate:\", error);\n            }\n        }\n        this.pendingCandidates = [];\n    }\n    // Send message through P2P connection\n    sendMessage(message) {\n        if (this.dataChannel && this.dataChannel.readyState === \"open\") {\n            this.dataChannel.send(JSON.stringify(message));\n            return true;\n        }\n        return false;\n    }\n    // Start audio/video call\n    async startCall(video = false) {\n        try {\n            this.localStream = await navigator.mediaDevices.getUserMedia({\n                audio: true,\n                video\n            });\n            // Add tracks to peer connection\n            this.localStream.getTracks().forEach((track)=>{\n                this.peerConnection.addTrack(track, this.localStream);\n            });\n            // Create new offer with media\n            const offer = await this.peerConnection.createOffer();\n            await this.peerConnection.setLocalDescription(offer);\n            this.socket.emit(\"webrtc-call-offer\", {\n                offer,\n                target: this.remoteAddress,\n                sender: this.localAddress,\n                hasVideo: video\n            });\n        } catch (error) {\n            console.error(\"Failed to start call:\", error);\n            throw error;\n        }\n    }\n    // Set message callback\n    onMessage(callback) {\n        this.onMessageCallback = callback;\n    }\n    // Set connection state callback\n    onConnectionState(callback) {\n        this.onConnectionStateCallback = callback;\n    }\n    // Get connection state\n    getConnectionState() {\n        if (this.dataChannel && this.dataChannel.readyState === \"open\") {\n            return \"connected\";\n        }\n        return this.connectionState;\n    }\n    // Close connection\n    close() {\n        console.log(\"Closing WebRTC connection\");\n        if (this.dataChannel) {\n            this.dataChannel.close();\n            this.dataChannel = null;\n        }\n        if (this.localStream) {\n            this.localStream.getTracks().forEach((track)=>track.stop());\n            this.localStream = null;\n        }\n        if (this.peerConnection) {\n            this.peerConnection.close();\n            this.peerConnection = null;\n        }\n        this.connectionState = \"closed\";\n        this.pendingCandidates = [];\n    }\n    // Reset connection for retry\n    reset() {\n        console.log(\"Resetting WebRTC connection\");\n        this.close();\n        this.setupPeerConnection();\n        this.connectionState = \"new\";\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUVBLDZCQUE2QjtJQUM3QnFFLFFBQWM7UUFDWnhELFFBQVFDLEdBQUcsQ0FBQztRQUNaLElBQUksQ0FBQ3FELEtBQUs7UUFDVixJQUFJLENBQUNsRSxtQkFBbUI7UUFDeEIsSUFBSSxDQUFDRixlQUFlLEdBQUc7SUFDekI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3doYXRzYXBwLW1ldGFtYXNrLWNsb25lLy4vdXRpbHMvd2VicnRjLnRzPzA1NzMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gV2ViUlRDIFAyUCBDb25uZWN0aW9uIE1hbmFnZXJcclxuZXhwb3J0IGludGVyZmFjZSBQMlBNZXNzYWdlIHtcclxuICBpZDogc3RyaW5nO1xyXG4gIHR5cGU6ICd0ZXh0JyB8ICdhdWRpbycgfCAndmlkZW8nIHwgJ2ZpbGUnO1xyXG4gIGNvbnRlbnQ6IHN0cmluZztcclxuICB0aW1lc3RhbXA6IG51bWJlcjtcclxuICBzZW5kZXI6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFdlYlJUQ01hbmFnZXIge1xyXG4gIHByaXZhdGUgcGVlckNvbm5lY3Rpb246IFJUQ1BlZXJDb25uZWN0aW9uIHwgbnVsbCA9IG51bGw7XHJcbiAgcHJpdmF0ZSBkYXRhQ2hhbm5lbDogUlRDRGF0YUNoYW5uZWwgfCBudWxsID0gbnVsbDtcclxuICBwcml2YXRlIGxvY2FsU3RyZWFtOiBNZWRpYVN0cmVhbSB8IG51bGwgPSBudWxsO1xyXG4gIHByaXZhdGUgb25NZXNzYWdlQ2FsbGJhY2s6ICgobWVzc2FnZTogUDJQTWVzc2FnZSkgPT4gdm9pZCkgfCBudWxsID0gbnVsbDtcclxuICBwcml2YXRlIG9uQ29ubmVjdGlvblN0YXRlQ2FsbGJhY2s6ICgoc3RhdGU6IHN0cmluZykgPT4gdm9pZCkgfCBudWxsID0gbnVsbDtcclxuICBwcml2YXRlIHNvY2tldDogYW55ID0gbnVsbDtcclxuICBwcml2YXRlIGxvY2FsQWRkcmVzczogc3RyaW5nID0gJyc7XHJcbiAgcHJpdmF0ZSByZW1vdGVBZGRyZXNzOiBzdHJpbmcgPSAnJztcclxuICBwcml2YXRlIGlzSW5pdGlhdG9yOiBib29sZWFuID0gZmFsc2U7XHJcbiAgcHJpdmF0ZSBjb25uZWN0aW9uU3RhdGU6IHN0cmluZyA9ICduZXcnO1xyXG4gIHByaXZhdGUgcGVuZGluZ0NhbmRpZGF0ZXM6IFJUQ0ljZUNhbmRpZGF0ZUluaXRbXSA9IFtdO1xyXG5cclxuICBjb25zdHJ1Y3Rvcihzb2NrZXQ6IGFueSwgbG9jYWxBZGRyZXNzOiBzdHJpbmcpIHtcclxuICAgIHRoaXMuc29ja2V0ID0gc29ja2V0O1xyXG4gICAgdGhpcy5sb2NhbEFkZHJlc3MgPSBsb2NhbEFkZHJlc3M7XHJcbiAgICB0aGlzLnNldHVwUGVlckNvbm5lY3Rpb24oKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2V0dXBQZWVyQ29ubmVjdGlvbigpIHtcclxuICAgIC8vIFNUVU4gc2VydmVycyBmb3IgTkFUIHRyYXZlcnNhbFxyXG4gICAgY29uc3QgY29uZmlndXJhdGlvbiA9IHtcclxuICAgICAgaWNlU2VydmVyczogW1xyXG4gICAgICAgIHsgdXJsczogJ3N0dW46c3R1bi5sLmdvb2dsZS5jb206MTkzMDInIH0sXHJcbiAgICAgICAgeyB1cmxzOiAnc3R1bjpzdHVuMS5sLmdvb2dsZS5jb206MTkzMDInIH1cclxuICAgICAgXVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnBlZXJDb25uZWN0aW9uID0gbmV3IFJUQ1BlZXJDb25uZWN0aW9uKGNvbmZpZ3VyYXRpb24pO1xyXG5cclxuICAgIC8vIEhhbmRsZSBJQ0UgY2FuZGlkYXRlc1xyXG4gICAgdGhpcy5wZWVyQ29ubmVjdGlvbi5vbmljZWNhbmRpZGF0ZSA9IChldmVudCkgPT4ge1xyXG4gICAgICBpZiAoZXZlbnQuY2FuZGlkYXRlICYmIHRoaXMuc29ja2V0KSB7XHJcbiAgICAgICAgdGhpcy5zb2NrZXQuZW1pdCgnaWNlLWNhbmRpZGF0ZScsIHtcclxuICAgICAgICAgIGNhbmRpZGF0ZTogZXZlbnQuY2FuZGlkYXRlLFxyXG4gICAgICAgICAgdGFyZ2V0OiB0aGlzLnJlbW90ZUFkZHJlc3NcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBIYW5kbGUgY29ubmVjdGlvbiBzdGF0ZSBjaGFuZ2VzXHJcbiAgICB0aGlzLnBlZXJDb25uZWN0aW9uLm9uY29ubmVjdGlvbnN0YXRlY2hhbmdlID0gKCkgPT4ge1xyXG4gICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGVlckNvbm5lY3Rpb24/LmNvbm5lY3Rpb25TdGF0ZSB8fCAnZGlzY29ubmVjdGVkJztcclxuICAgICAgY29uc29sZS5sb2coJ1AyUCBDb25uZWN0aW9uIHN0YXRlOicsIHN0YXRlKTtcclxuICAgICAgdGhpcy5vbkNvbm5lY3Rpb25TdGF0ZUNhbGxiYWNrPy4oc3RhdGUpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBIYW5kbGUgaW5jb21pbmcgZGF0YSBjaGFubmVsXHJcbiAgICB0aGlzLnBlZXJDb25uZWN0aW9uLm9uZGF0YWNoYW5uZWwgPSAoZXZlbnQpID0+IHtcclxuICAgICAgY29uc3QgY2hhbm5lbCA9IGV2ZW50LmNoYW5uZWw7XHJcbiAgICAgIHRoaXMuc2V0dXBEYXRhQ2hhbm5lbChjaGFubmVsKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gSGFuZGxlIHJlbW90ZSBzdHJlYW1cclxuICAgIHRoaXMucGVlckNvbm5lY3Rpb24ub250cmFjayA9IChldmVudCkgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZygnUmVjZWl2ZWQgcmVtb3RlIHN0cmVhbScpO1xyXG4gICAgICAvLyBIYW5kbGUgcmVtb3RlIGF1ZGlvL3ZpZGVvIHN0cmVhbVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2V0dXBEYXRhQ2hhbm5lbChjaGFubmVsOiBSVENEYXRhQ2hhbm5lbCkge1xyXG4gICAgdGhpcy5kYXRhQ2hhbm5lbCA9IGNoYW5uZWw7XHJcblxyXG4gICAgY2hhbm5lbC5vbm9wZW4gPSAoKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdQMlAgRGF0YSBjaGFubmVsIG9wZW5lZCcpO1xyXG4gICAgICB0aGlzLm9uQ29ubmVjdGlvblN0YXRlQ2FsbGJhY2s/LignY29ubmVjdGVkJyk7XHJcbiAgICB9O1xyXG5cclxuICAgIGNoYW5uZWwub25jbG9zZSA9ICgpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coJ1AyUCBEYXRhIGNoYW5uZWwgY2xvc2VkJyk7XHJcbiAgICAgIHRoaXMub25Db25uZWN0aW9uU3RhdGVDYWxsYmFjaz8uKCdkaXNjb25uZWN0ZWQnKTtcclxuICAgIH07XHJcblxyXG4gICAgY2hhbm5lbC5vbm1lc3NhZ2UgPSAoZXZlbnQpID0+IHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBtZXNzYWdlOiBQMlBNZXNzYWdlID0gSlNPTi5wYXJzZShldmVudC5kYXRhKTtcclxuICAgICAgICBjb25zb2xlLmxvZygnUmVjZWl2ZWQgUDJQIG1lc3NhZ2U6JywgbWVzc2FnZSk7XHJcbiAgICAgICAgdGhpcy5vbk1lc3NhZ2VDYWxsYmFjaz8uKG1lc3NhZ2UpO1xyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBwYXJzZSBQMlAgbWVzc2FnZTonLCBlcnJvcik7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvLyBJbml0aWF0ZSBjb25uZWN0aW9uIHRvIHJlbW90ZSBwZWVyXHJcbiAgYXN5bmMgaW5pdGlhdGVDb25uZWN0aW9uKHJlbW90ZUFkZHJlc3M6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc29sZS5sb2coJ0luaXRpYXRpbmcgY29ubmVjdGlvbiB0bzonLCByZW1vdGVBZGRyZXNzKTtcclxuICAgICAgXHJcbiAgICAgIGlmICghdGhpcy5wZWVyQ29ubmVjdGlvbikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ05vIHBlZXIgY29ubmVjdGlvbiBhdmFpbGFibGUnKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIENoZWNrIGlmIHdlJ3JlIGFscmVhZHkgY29ubmVjdGVkIG9yIGNvbm5lY3RpbmcgdG8gdGhpcyBwZWVyXHJcbiAgICAgIGlmICh0aGlzLnJlbW90ZUFkZHJlc3MgPT09IHJlbW90ZUFkZHJlc3MgJiYgXHJcbiAgICAgICAgICAodGhpcy5jb25uZWN0aW9uU3RhdGUgPT09ICdjb25uZWN0ZWQnIHx8IHRoaXMuY29ubmVjdGlvblN0YXRlID09PSAnY29ubmVjdGluZycpKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ0FscmVhZHkgY29ubmVjdGVkL2Nvbm5lY3RpbmcgdG8gdGhpcyBwZWVyJyk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLnJlbW90ZUFkZHJlc3MgPSByZW1vdGVBZGRyZXNzO1xyXG4gICAgICB0aGlzLmlzSW5pdGlhdG9yID0gdHJ1ZTtcclxuXHJcbiAgICAgIC8vIENyZWF0ZSBkYXRhIGNoYW5uZWxcclxuICAgICAgdGhpcy5kYXRhQ2hhbm5lbCA9IHRoaXMucGVlckNvbm5lY3Rpb24uY3JlYXRlRGF0YUNoYW5uZWwoJ21lc3NhZ2VzJywge1xyXG4gICAgICAgIG9yZGVyZWQ6IHRydWVcclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMuc2V0dXBEYXRhQ2hhbm5lbCh0aGlzLmRhdGFDaGFubmVsKTtcclxuXHJcbiAgICAgIC8vIENyZWF0ZSBvZmZlclxyXG4gICAgICBjb25zdCBvZmZlciA9IGF3YWl0IHRoaXMucGVlckNvbm5lY3Rpb24uY3JlYXRlT2ZmZXIoKTtcclxuICAgICAgYXdhaXQgdGhpcy5wZWVyQ29ubmVjdGlvbi5zZXRMb2NhbERlc2NyaXB0aW9uKG9mZmVyKTtcclxuICAgICAgY29uc29sZS5sb2coJ0xvY2FsIGRlc2NyaXB0aW9uIChvZmZlcikgc2V0IHN1Y2Nlc3NmdWxseScpO1xyXG5cclxuICAgICAgLy8gU2VuZCBvZmZlciB0aHJvdWdoIHNpZ25hbGluZyBzZXJ2ZXJcclxuICAgICAgdGhpcy5zb2NrZXQuZW1pdCgnd2VicnRjLW9mZmVyJywge1xyXG4gICAgICAgIG9mZmVyLFxyXG4gICAgICAgIHRhcmdldDogcmVtb3RlQWRkcmVzcyxcclxuICAgICAgICBzZW5kZXI6IHRoaXMubG9jYWxBZGRyZXNzXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgdGhpcy5jb25uZWN0aW9uU3RhdGUgPSAnY29ubmVjdGluZyc7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbml0aWF0aW5nIGNvbm5lY3Rpb246JywgZXJyb3IpO1xyXG4gICAgICB0aGlzLmNvbm5lY3Rpb25TdGF0ZSA9ICdmYWlsZWQnO1xyXG4gICAgICB0aGlzLm9uQ29ubmVjdGlvblN0YXRlQ2FsbGJhY2s/LignZmFpbGVkJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBIYW5kbGUgaW5jb21pbmcgb2ZmZXJcclxuICBhc3luYyBoYW5kbGVPZmZlcihvZmZlcjogUlRDU2Vzc2lvbkRlc2NyaXB0aW9uSW5pdCwgc2VuZGVyQWRkcmVzczogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zb2xlLmxvZygnSGFuZGxpbmcgb2ZmZXIgZnJvbTonLCBzZW5kZXJBZGRyZXNzLCAnQ3VycmVudCBzdGF0ZTonLCB0aGlzLnBlZXJDb25uZWN0aW9uPy5zaWduYWxpbmdTdGF0ZSk7XHJcbiAgICAgIFxyXG4gICAgICBpZiAoIXRoaXMucGVlckNvbm5lY3Rpb24pIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdObyBwZWVyIGNvbm5lY3Rpb24gYXZhaWxhYmxlJyk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBDaGVjayBpZiB3ZSdyZSBpbiB0aGUgcmlnaHQgc3RhdGUgdG8gaGFuZGxlIGFuIG9mZmVyXHJcbiAgICAgIGlmICh0aGlzLnBlZXJDb25uZWN0aW9uLnNpZ25hbGluZ1N0YXRlICE9PSAnc3RhYmxlJyAmJiB0aGlzLnBlZXJDb25uZWN0aW9uLnNpZ25hbGluZ1N0YXRlICE9PSAnaGF2ZS1sb2NhbC1vZmZlcicpIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oJ0lnbm9yaW5nIG9mZmVyIGluIHN0YXRlOicsIHRoaXMucGVlckNvbm5lY3Rpb24uc2lnbmFsaW5nU3RhdGUpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5yZW1vdGVBZGRyZXNzID0gc2VuZGVyQWRkcmVzcztcclxuICAgICAgdGhpcy5pc0luaXRpYXRvciA9IGZhbHNlO1xyXG5cclxuICAgICAgYXdhaXQgdGhpcy5wZWVyQ29ubmVjdGlvbi5zZXRSZW1vdGVEZXNjcmlwdGlvbihvZmZlcik7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdSZW1vdGUgZGVzY3JpcHRpb24gc2V0IHN1Y2Nlc3NmdWxseScpO1xyXG5cclxuICAgICAgLy8gQ3JlYXRlIGFuc3dlclxyXG4gICAgICBjb25zdCBhbnN3ZXIgPSBhd2FpdCB0aGlzLnBlZXJDb25uZWN0aW9uLmNyZWF0ZUFuc3dlcigpO1xyXG4gICAgICBhd2FpdCB0aGlzLnBlZXJDb25uZWN0aW9uLnNldExvY2FsRGVzY3JpcHRpb24oYW5zd2VyKTtcclxuICAgICAgY29uc29sZS5sb2coJ0xvY2FsIGRlc2NyaXB0aW9uIChhbnN3ZXIpIHNldCBzdWNjZXNzZnVsbHknKTtcclxuXHJcbiAgICAgIC8vIFByb2Nlc3MgYW55IHBlbmRpbmcgSUNFIGNhbmRpZGF0ZXNcclxuICAgICAgYXdhaXQgdGhpcy5wcm9jZXNzUGVuZGluZ0NhbmRpZGF0ZXMoKTtcclxuXHJcbiAgICAgIC8vIFNlbmQgYW5zd2VyIHRocm91Z2ggc2lnbmFsaW5nIHNlcnZlclxyXG4gICAgICB0aGlzLnNvY2tldC5lbWl0KCd3ZWJydGMtYW5zd2VyJywge1xyXG4gICAgICAgIGFuc3dlcixcclxuICAgICAgICB0YXJnZXQ6IHNlbmRlckFkZHJlc3MsXHJcbiAgICAgICAgc2VuZGVyOiB0aGlzLmxvY2FsQWRkcmVzc1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHRoaXMuY29ubmVjdGlvblN0YXRlID0gJ2Nvbm5lY3RpbmcnO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaGFuZGxpbmcgb2ZmZXI6JywgZXJyb3IpO1xyXG4gICAgICB0aGlzLmNvbm5lY3Rpb25TdGF0ZSA9ICdmYWlsZWQnO1xyXG4gICAgICB0aGlzLm9uQ29ubmVjdGlvblN0YXRlQ2FsbGJhY2s/LignZmFpbGVkJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBIYW5kbGUgaW5jb21pbmcgYW5zd2VyXHJcbiAgYXN5bmMgaGFuZGxlQW5zd2VyKGFuc3dlcjogUlRDU2Vzc2lvbkRlc2NyaXB0aW9uSW5pdCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc29sZS5sb2coJ0hhbmRsaW5nIGFuc3dlciwgQ3VycmVudCBzdGF0ZTonLCB0aGlzLnBlZXJDb25uZWN0aW9uPy5zaWduYWxpbmdTdGF0ZSk7XHJcbiAgICAgIFxyXG4gICAgICBpZiAoIXRoaXMucGVlckNvbm5lY3Rpb24pIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdObyBwZWVyIGNvbm5lY3Rpb24gYXZhaWxhYmxlJyk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBDaGVjayBpZiB3ZSdyZSBpbiB0aGUgcmlnaHQgc3RhdGUgdG8gaGFuZGxlIGFuIGFuc3dlclxyXG4gICAgICBpZiAodGhpcy5wZWVyQ29ubmVjdGlvbi5zaWduYWxpbmdTdGF0ZSAhPT0gJ2hhdmUtbG9jYWwtb2ZmZXInKSB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKCdJZ25vcmluZyBhbnN3ZXIgaW4gc3RhdGU6JywgdGhpcy5wZWVyQ29ubmVjdGlvbi5zaWduYWxpbmdTdGF0ZSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBhd2FpdCB0aGlzLnBlZXJDb25uZWN0aW9uLnNldFJlbW90ZURlc2NyaXB0aW9uKGFuc3dlcik7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdSZW1vdGUgZGVzY3JpcHRpb24gKGFuc3dlcikgc2V0IHN1Y2Nlc3NmdWxseScpO1xyXG5cclxuICAgICAgLy8gUHJvY2VzcyBhbnkgcGVuZGluZyBJQ0UgY2FuZGlkYXRlc1xyXG4gICAgICBhd2FpdCB0aGlzLnByb2Nlc3NQZW5kaW5nQ2FuZGlkYXRlcygpO1xyXG5cclxuICAgICAgdGhpcy5jb25uZWN0aW9uU3RhdGUgPSAnY29ubmVjdGluZyc7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBoYW5kbGluZyBhbnN3ZXI6JywgZXJyb3IpO1xyXG4gICAgICB0aGlzLmNvbm5lY3Rpb25TdGF0ZSA9ICdmYWlsZWQnO1xyXG4gICAgICB0aGlzLm9uQ29ubmVjdGlvblN0YXRlQ2FsbGJhY2s/LignZmFpbGVkJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBIYW5kbGUgSUNFIGNhbmRpZGF0ZVxyXG4gIGFzeW5jIGhhbmRsZUljZUNhbmRpZGF0ZShjYW5kaWRhdGU6IFJUQ0ljZUNhbmRpZGF0ZUluaXQpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGlmICghdGhpcy5wZWVyQ29ubmVjdGlvbikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ05vIHBlZXIgY29ubmVjdGlvbiBhdmFpbGFibGUgZm9yIElDRSBjYW5kaWRhdGUnKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIElmIHJlbW90ZSBkZXNjcmlwdGlvbiBpcyBub3Qgc2V0IHlldCwgcXVldWUgdGhlIGNhbmRpZGF0ZVxyXG4gICAgICBpZiAodGhpcy5wZWVyQ29ubmVjdGlvbi5yZW1vdGVEZXNjcmlwdGlvbiA9PT0gbnVsbCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdRdWV1ZWluZyBJQ0UgY2FuZGlkYXRlIHVudGlsIHJlbW90ZSBkZXNjcmlwdGlvbiBpcyBzZXQnKTtcclxuICAgICAgICB0aGlzLnBlbmRpbmdDYW5kaWRhdGVzLnB1c2goY2FuZGlkYXRlKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGF3YWl0IHRoaXMucGVlckNvbm5lY3Rpb24uYWRkSWNlQ2FuZGlkYXRlKGNhbmRpZGF0ZSk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdJQ0UgY2FuZGlkYXRlIGFkZGVkIHN1Y2Nlc3NmdWxseScpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaGFuZGxpbmcgSUNFIGNhbmRpZGF0ZTonLCBlcnJvcik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBQcm9jZXNzIHBlbmRpbmcgSUNFIGNhbmRpZGF0ZXNcclxuICBwcml2YXRlIGFzeW5jIHByb2Nlc3NQZW5kaW5nQ2FuZGlkYXRlcygpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGNvbnNvbGUubG9nKCdQcm9jZXNzaW5nJywgdGhpcy5wZW5kaW5nQ2FuZGlkYXRlcy5sZW5ndGgsICdwZW5kaW5nIElDRSBjYW5kaWRhdGVzJyk7XHJcbiAgICBcclxuICAgIGZvciAoY29uc3QgY2FuZGlkYXRlIG9mIHRoaXMucGVuZGluZ0NhbmRpZGF0ZXMpIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBhd2FpdCB0aGlzLnBlZXJDb25uZWN0aW9uIS5hZGRJY2VDYW5kaWRhdGUoY2FuZGlkYXRlKTtcclxuICAgICAgICBjb25zb2xlLmxvZygnUGVuZGluZyBJQ0UgY2FuZGlkYXRlIGFkZGVkIHN1Y2Nlc3NmdWxseScpO1xyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFkZGluZyBwZW5kaW5nIElDRSBjYW5kaWRhdGU6JywgZXJyb3IpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHRoaXMucGVuZGluZ0NhbmRpZGF0ZXMgPSBbXTtcclxuICB9XHJcblxyXG4gIC8vIFNlbmQgbWVzc2FnZSB0aHJvdWdoIFAyUCBjb25uZWN0aW9uXHJcbiAgc2VuZE1lc3NhZ2UobWVzc2FnZTogUDJQTWVzc2FnZSk6IGJvb2xlYW4ge1xyXG4gICAgaWYgKHRoaXMuZGF0YUNoYW5uZWwgJiYgdGhpcy5kYXRhQ2hhbm5lbC5yZWFkeVN0YXRlID09PSAnb3BlbicpIHtcclxuICAgICAgdGhpcy5kYXRhQ2hhbm5lbC5zZW5kKEpTT04uc3RyaW5naWZ5KG1lc3NhZ2UpKTtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG5cclxuICAvLyBTdGFydCBhdWRpby92aWRlbyBjYWxsXHJcbiAgYXN5bmMgc3RhcnRDYWxsKHZpZGVvOiBib29sZWFuID0gZmFsc2UpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIHRoaXMubG9jYWxTdHJlYW0gPSBhd2FpdCBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSh7XHJcbiAgICAgICAgYXVkaW86IHRydWUsXHJcbiAgICAgICAgdmlkZW9cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBBZGQgdHJhY2tzIHRvIHBlZXIgY29ubmVjdGlvblxyXG4gICAgICB0aGlzLmxvY2FsU3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2godHJhY2sgPT4ge1xyXG4gICAgICAgIHRoaXMucGVlckNvbm5lY3Rpb24hLmFkZFRyYWNrKHRyYWNrLCB0aGlzLmxvY2FsU3RyZWFtISk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gQ3JlYXRlIG5ldyBvZmZlciB3aXRoIG1lZGlhXHJcbiAgICAgIGNvbnN0IG9mZmVyID0gYXdhaXQgdGhpcy5wZWVyQ29ubmVjdGlvbiEuY3JlYXRlT2ZmZXIoKTtcclxuICAgICAgYXdhaXQgdGhpcy5wZWVyQ29ubmVjdGlvbiEuc2V0TG9jYWxEZXNjcmlwdGlvbihvZmZlcik7XHJcblxyXG4gICAgICB0aGlzLnNvY2tldC5lbWl0KCd3ZWJydGMtY2FsbC1vZmZlcicsIHtcclxuICAgICAgICBvZmZlcixcclxuICAgICAgICB0YXJnZXQ6IHRoaXMucmVtb3RlQWRkcmVzcyxcclxuICAgICAgICBzZW5kZXI6IHRoaXMubG9jYWxBZGRyZXNzLFxyXG4gICAgICAgIGhhc1ZpZGVvOiB2aWRlb1xyXG4gICAgICB9KTtcclxuXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gc3RhcnQgY2FsbDonLCBlcnJvcik7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gU2V0IG1lc3NhZ2UgY2FsbGJhY2tcclxuICBvbk1lc3NhZ2UoY2FsbGJhY2s6IChtZXNzYWdlOiBQMlBNZXNzYWdlKSA9PiB2b2lkKTogdm9pZCB7XHJcbiAgICB0aGlzLm9uTWVzc2FnZUNhbGxiYWNrID0gY2FsbGJhY2s7XHJcbiAgfVxyXG5cclxuICAvLyBTZXQgY29ubmVjdGlvbiBzdGF0ZSBjYWxsYmFja1xyXG4gIG9uQ29ubmVjdGlvblN0YXRlKGNhbGxiYWNrOiAoc3RhdGU6IHN0cmluZykgPT4gdm9pZCk6IHZvaWQge1xyXG4gICAgdGhpcy5vbkNvbm5lY3Rpb25TdGF0ZUNhbGxiYWNrID0gY2FsbGJhY2s7XHJcbiAgfVxyXG5cclxuICAvLyBHZXQgY29ubmVjdGlvbiBzdGF0ZVxyXG4gIGdldENvbm5lY3Rpb25TdGF0ZSgpOiBzdHJpbmcge1xyXG4gICAgaWYgKHRoaXMuZGF0YUNoYW5uZWwgJiYgdGhpcy5kYXRhQ2hhbm5lbC5yZWFkeVN0YXRlID09PSAnb3BlbicpIHtcclxuICAgICAgcmV0dXJuICdjb25uZWN0ZWQnO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvblN0YXRlO1xyXG4gIH1cclxuXHJcbiAgLy8gQ2xvc2UgY29ubmVjdGlvblxyXG4gIGNsb3NlKCk6IHZvaWQge1xyXG4gICAgY29uc29sZS5sb2coJ0Nsb3NpbmcgV2ViUlRDIGNvbm5lY3Rpb24nKTtcclxuICAgIFxyXG4gICAgaWYgKHRoaXMuZGF0YUNoYW5uZWwpIHtcclxuICAgICAgdGhpcy5kYXRhQ2hhbm5lbC5jbG9zZSgpO1xyXG4gICAgICB0aGlzLmRhdGFDaGFubmVsID0gbnVsbDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYgKHRoaXMubG9jYWxTdHJlYW0pIHtcclxuICAgICAgdGhpcy5sb2NhbFN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKHRyYWNrID0+IHRyYWNrLnN0b3AoKSk7XHJcbiAgICAgIHRoaXMubG9jYWxTdHJlYW0gPSBudWxsO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZiAodGhpcy5wZWVyQ29ubmVjdGlvbikge1xyXG4gICAgICB0aGlzLnBlZXJDb25uZWN0aW9uLmNsb3NlKCk7XHJcbiAgICAgIHRoaXMucGVlckNvbm5lY3Rpb24gPSBudWxsO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICB0aGlzLmNvbm5lY3Rpb25TdGF0ZSA9ICdjbG9zZWQnO1xyXG4gICAgdGhpcy5wZW5kaW5nQ2FuZGlkYXRlcyA9IFtdO1xyXG4gIH1cclxuXHJcbiAgLy8gUmVzZXQgY29ubmVjdGlvbiBmb3IgcmV0cnlcclxuICByZXNldCgpOiB2b2lkIHtcclxuICAgIGNvbnNvbGUubG9nKCdSZXNldHRpbmcgV2ViUlRDIGNvbm5lY3Rpb24nKTtcclxuICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIHRoaXMuc2V0dXBQZWVyQ29ubmVjdGlvbigpO1xyXG4gICAgdGhpcy5jb25uZWN0aW9uU3RhdGUgPSAnbmV3JztcclxuICB9XHJcbn0iXSwibmFtZXMiOlsiV2ViUlRDTWFuYWdlciIsImNvbnN0cnVjdG9yIiwic29ja2V0IiwibG9jYWxBZGRyZXNzIiwicGVlckNvbm5lY3Rpb24iLCJkYXRhQ2hhbm5lbCIsImxvY2FsU3RyZWFtIiwib25NZXNzYWdlQ2FsbGJhY2siLCJvbkNvbm5lY3Rpb25TdGF0ZUNhbGxiYWNrIiwicmVtb3RlQWRkcmVzcyIsImlzSW5pdGlhdG9yIiwiY29ubmVjdGlvblN0YXRlIiwicGVuZGluZ0NhbmRpZGF0ZXMiLCJzZXR1cFBlZXJDb25uZWN0aW9uIiwiY29uZmlndXJhdGlvbiIsImljZVNlcnZlcnMiLCJ1cmxzIiwiUlRDUGVlckNvbm5lY3Rpb24iLCJvbmljZWNhbmRpZGF0ZSIsImV2ZW50IiwiY2FuZGlkYXRlIiwiZW1pdCIsInRhcmdldCIsIm9uY29ubmVjdGlvbnN0YXRlY2hhbmdlIiwic3RhdGUiLCJjb25zb2xlIiwibG9nIiwib25kYXRhY2hhbm5lbCIsImNoYW5uZWwiLCJzZXR1cERhdGFDaGFubmVsIiwib250cmFjayIsIm9ub3BlbiIsIm9uY2xvc2UiLCJvbm1lc3NhZ2UiLCJtZXNzYWdlIiwiSlNPTiIsInBhcnNlIiwiZGF0YSIsImVycm9yIiwiaW5pdGlhdGVDb25uZWN0aW9uIiwiY3JlYXRlRGF0YUNoYW5uZWwiLCJvcmRlcmVkIiwib2ZmZXIiLCJjcmVhdGVPZmZlciIsInNldExvY2FsRGVzY3JpcHRpb24iLCJzZW5kZXIiLCJoYW5kbGVPZmZlciIsInNlbmRlckFkZHJlc3MiLCJzaWduYWxpbmdTdGF0ZSIsIndhcm4iLCJzZXRSZW1vdGVEZXNjcmlwdGlvbiIsImFuc3dlciIsImNyZWF0ZUFuc3dlciIsInByb2Nlc3NQZW5kaW5nQ2FuZGlkYXRlcyIsImhhbmRsZUFuc3dlciIsImhhbmRsZUljZUNhbmRpZGF0ZSIsInJlbW90ZURlc2NyaXB0aW9uIiwicHVzaCIsImFkZEljZUNhbmRpZGF0ZSIsImxlbmd0aCIsInNlbmRNZXNzYWdlIiwicmVhZHlTdGF0ZSIsInNlbmQiLCJzdHJpbmdpZnkiLCJzdGFydENhbGwiLCJ2aWRlbyIsIm5hdmlnYXRvciIsIm1lZGlhRGV2aWNlcyIsImdldFVzZXJNZWRpYSIsImF1ZGlvIiwiZ2V0VHJhY2tzIiwiZm9yRWFjaCIsInRyYWNrIiwiYWRkVHJhY2siLCJoYXNWaWRlbyIsIm9uTWVzc2FnZSIsImNhbGxiYWNrIiwib25Db25uZWN0aW9uU3RhdGUiLCJnZXRDb25uZWN0aW9uU3RhdGUiLCJjbG9zZSIsInN0b3AiLCJyZXNldCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./utils/webrtc.ts\n");

/***/ }),

/***/ "./styles/globals.css":
/*!****************************!*\
  !*** ./styles/globals.css ***!
  \****************************/
/***/ (() => {



/***/ }),

/***/ "next/dist/compiled/next-server/pages.runtime.dev.js":
/*!**********************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages.runtime.dev.js" ***!
  \**********************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/pages.runtime.dev.js");

/***/ }),

/***/ "react":
/*!************************!*\
  !*** external "react" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("react");

/***/ }),

/***/ "react/jsx-dev-runtime":
/*!****************************************!*\
  !*** external "react/jsx-dev-runtime" ***!
  \****************************************/
/***/ ((module) => {

"use strict";
module.exports = require("react/jsx-dev-runtime");

/***/ }),

/***/ "react/jsx-runtime":
/*!************************************!*\
  !*** external "react/jsx-runtime" ***!
  \************************************/
/***/ ((module) => {

"use strict";
module.exports = require("react/jsx-runtime");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "ethers":
/*!*************************!*\
  !*** external "ethers" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = import("ethers");;

/***/ }),

/***/ "socket.io-client":
/*!***********************************!*\
  !*** external "socket.io-client" ***!
  \***********************************/
/***/ ((module) => {

"use strict";
module.exports = import("socket.io-client");;

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@swc"], () => (__webpack_exec__("./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2F_error&preferredRegion=&absolutePagePath=private-next-pages%2F_error&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();